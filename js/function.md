
# js常用函数汇总
### 目前已更新至 第一百零八例
整理了一些js常用函数，包括浏览器兼容， 常用字符串处理，获取信息以及移动端信息获取等 ，版本不断补充更新中，

其中函数都已经验证过，如果有错误请及时反馈或者有好的一些工具函数，也可以提出来添加进去，针对相同作用的不同函数，

我会进行优化调整 并且测试，尽可能保证个浏览器兼容，排除冲突等。
* [一、js一些常用的校验](js一些常用的校验.md)
    * [1.1、校验是否为空(null/空串)](一、校验是否为空null-空串.md)
    * [1.2、校验是否为纯数字](2.2.md)
    * [1.3、校验是否为纯数字(正则)](1.3、.md)
    * [1.4、检验手机号](1.4、.md)
    * [1.5、验证座机号](1.5、.md)
    * [1.6、校验ip](1.6、.md)
    * [1.7、检验url地址](1.7、.md)
    * [1.8、检验身份证](1.8、.md)
    * [1.9、检验邮箱](1.9、.md)
    * [1.10、检验日期](1.10、.md)
    * [1.11、检验金额](1.11、.md)
    * [1.12、检验否是汉字](1.12、.md)
    * [1.13、校验数字的表达式](1.13、.md)
    * [1.14、校验字符的表达式](1.14、.md)
    * [1.15、特殊需求表达式](1.15、.md)
    * [1.16、检测密码强度](检测密码强度.md)
* [二、手机类型判断](二、js一些常用的校验.md)
* [三、返回字符串长度，汉子计数为2](二、.md)
* [四、获取url中的参数](四、.md)
* [五、js 绑定事件 适用于任何浏览器的元素绑定](五、.md)
* [六、获得当前浏览器JS的版本](六、.md)
* [七、获取当前点击事件的Object对象](七、.md)
* [八、字符串截取方法](八、.md)
* [九、JS 弹出新窗口全屏](九、.md)
* [十、全选/全不选](十、.md)
* [十一、js 判断浏览器](十一、.md)
* [十二、JS判断两个日期大小](十二、.md)
* [十三、移除事件](十三、.md)
* [十四、回车提交](十四、.md)
* [十五、JS 执行计时器](十五、.md)
* [十六、JS 写Cookie](十六、.md)
* [十七、JS 读Cookie](十七、.md)
* [十八、Ajax 请求](十八、.md)
* [十九、JS StringBuilder 用法](十九、.md)
* [二十、JS 加载到顶部LoadJS](二十、.md)
* [二十一、清空 LoadJS 加载到顶部的js引用](二十一、.md)
* [二十二、JS 替换非法字符](二十二、.md)
* [二十三、按Ctrl + Entert 直接提交表单](二十三、.md)
* [二十四、获取当前时间](二十四、.md)
* [二十五、Js 去掉空格方法](二十五、.md)
* [二十六、js 动态移除 head 里的 js 引用](二十六、.md)
* [二十七、整个URL 点击事件 加在URL里的onclick里](二十七、.md)
* [二十八、判断浏览器使用的是哪个 JS 版本](二十八、.md)
* [二十九、加入收藏夹](二十九、.md)
* [三十、动态加载 CSS 样式文件](三十、.md)
* [三十一、返回脚本内容](三十一、.md)
* [三十二、清除脚本内容](三十二、.md)
* [三十三、返回按ID检索的元素对象](三十三、.md)
* [三十四、显示元素 待验证](三十四、.md)
* [三十五、与insertBefore方法（已存在）对应的insertAfter方法](三十五、.md)
* [三十六、光标停在文字的后面，文本框获得焦点时调用](三十六、.md)
* [三十七、检验URL链接是否有效](三十七、.md)
* [三十八、格式化CSS样式代码](三十八、.md)
* [三十九、压缩CSS样式代码](三十九、.md)
* [四十、 获取当前路径](四十、.md)
* [四十一、ip 转 整型](四十一、.md)
* [四十二、整型解析为IP地址](四十二、.md)
* [四十三、删除cookies](四十三、.md)
* [四十四、判断是否以某个字符串结束](四十四、.md)
* [四十五、判断是否以某个字符串开头](四十五、.md)
* [四十六、根据样式名称检索元素对象](四十六、.md)
* [四十七、 获取移动设备初始化大小](四十七、.md)
* [四十八、 获取移动设备最大化大小](四十八、.md)
* [四十九、获取移动设备屏幕宽度](四十九、.md)
* [五十、获取页面scrollLeft](五十、.md)
* [六十、获取页面宽度](六十、.md)
* [六十一、获取页面scrollTop](六十一、.md)
* [六十二、获取页面可视高度](六十二、.md)
* [六十三、判断数组元素是否重复](六十三、.md)
* [六十四、生成随机数](六十四、.md)
* [六十五、数组去重](六十五、.md)
* [六十六、深度拷贝对象](六十六、.md)
* [六十七、全部替换replaceAll](六十七、.md)
* [六十八、阻止冒泡](六十八、.md)
* [六十九、返回顶部](六十九、.md)
* [七十、jsonp跨域请求](七十、.md)
* [七十一、到某一个时间的倒计时](到某一个时间的倒计时.md)
* [七十二、清除对象中值为空的属性](七十二、.md)
* [七十三、获取文件后缀名的方法](七十三、.md)
* [七十四、判断一个对象是不是数组类型](七十四、.md)
* [七十五、冒泡排序](七十五、.md)
* [七十六、实现一个最简单的模板引擎](七十六、.md)
* [七十七、数组最大值最小值](七十七、.md)
* [七十八、数组求和，平均值](七十八、.md)
* [七十九、从数组中随机获取元素](七十九、.md)
* [八十、返回对应元素在数组中的下标](八十、.md)
* [八十一、返回数组（字符串）一个元素出现的次数](八十一、.md)
* [八十二、得到n1-n2下标的数组，即返回数组下标arr[n1]到数组arr[n2]的值](八十二、.md)
* [八十三、筛选数组，这里所做的就只是删除相应的数组](八十三、.md)
* [八十四、去除字符串空格](八十四、.md)
* [八十五、字母大小写切换](八十五、.md)
* [八十六、字符串循环复制，前面的要循环的字符串，后面的要循环的次数](八十六、.md)
* [八十七、字符串替换，这里的要替换的字符串必须是连续的](八十七、.md)
* [八十九、将时间戳转换成日期格式](八十九、.md)
* [九十、检验字符串是否超过某个值，超出出现省略号](九十、.md)
* [九十一、随机码，这里的参数count必须是 2 ~ 36 之间的整数](九十一、.md)
* [九十二、查找字符串中某字符出现的次数](九十二、.md)
* [九十三、JS插入排序](九十三、.md)
* [九十四、获取前num天的日期](九十四、.md)
* [九十五、js实时计算rem,宽度大于1920px时1rem=100px](九十五、.md)
* [九十六、原生JS获取鼠标XY轴的值](九十六、.md)
* [九十七、转成XML对象](九十七、.md)
* [九十八、Js身份证验证函数](九十八、.md)
* [九十九、格式化数字串](九十九、.md)
* [一百、原生Ajax 请求](一百、.md)

做web的经常会遇到一些js校验，比如身份证呀，手机号呀，邮箱呀等等，分享下我工作中遇到的这些
~~~
/* 
 * 校验是否为空(null/空串) 
 */  
var checkNull = function(str){  
    if(str == null || str == ""){  
        return false;  
    }  
    return true;  
}  
~~~
~~~
/* 
 * 校验是否为纯数字 
 * js的isNaN函数 
 */  
var checkNum = function(num){  
    if(isNaN(num)){  
        return false;  
    }  
    return true;  
} 
~~~
~~~
/* 
 * 校验是否为纯数字(正则) 
 */  
var checkNum2 = function(num){  
     var re = /^[0-9]+.?[0-9]*$/; //判断字符串是否为数字 （判断正整数 /^[1-9]+[0-9]*]*$/）  
     if (!re.test(num)){  
        return false;  
     }  
    return true;  
} 
~~~
~~~
/* 
 * 检验手机号 
 */  
var checkPhone = function(phone){  
    var reg = /^1[3|4|5|7|8][0-9]{9}$/; //验证规则,第一位是【1】开头，第二位有【3,4,5,7,8】，第三位及以后可以是【0-9】  
//  var reg = /^1[0-9]{10}$/;//不验证第二位，防止几年后新增号码段  
    if(!reg.test(phone)){  
        return false;  
    }  
    return true;  
}  
~~~
~~~
/* 
 * 验证座机号 
 */  
var checkTel = function(tel) {  
    var reg = /^(\d3,4|\d{3,4}-)?\d{7,8}$/;  
    if (!reg.test(tel)) {  
        return false;  
    }  
    return true;  
} 
~~~
~~~
/* 
 * 校验ip 
 */  
var checkIp = function(ip){    
    var reSpaceCheck = /^(\d+)\.(\d+)\.(\d+)\.(\d+)$/;    
    if (reSpaceCheck.test(ip)){    
        ip.match(reSpaceCheck);    
        if (RegExp.$1 <= 255 && RegExp.$1 >= 0 && RegExp.$2 <= 255 && RegExp.$2 >=0    
          &&RegExp.$3 <= 255 && RegExp.$3 >= 0 && RegExp.$4 <= 255 && RegExp.$4>=0){    
            return true;     
        }else{    
            return false;    
        }    
    }else{    
        return false;    
    }    
}
~~~
~~~
/* 
 * 检验url地址 
 */  
var checkUrl = function(url) {  
    var reg = /(http|ftp|https):\/\/[\w\-_]+(\.[\w\-_]+)+([\w\-\.,@?^=%&:/~\+#]*[\w\-\@?^=%&/~\+#])?/;  
    if (!reg.test(url)) {  
        return false;  
    }  
    return true;  
} 
~~~
~~~
/**
 * 完美判断是否为网址
 */
function IsURL(strUrl) {
    var regular = /^\b(((https?|ftp):\/\/)?[-a-z0-9]+(\.[-a-z0-9]+)*\.(?:com|edu|gov|int|mil|net|org|biz|info|name|museum|asia|coop|aero|[a-z][a-z]|((25[0-5])|(2[0-4]\d)|(1\d\d)|([1-9]\d)|\d))\b(\/[-a-z0-9_:\@&?=+,.!\/~%\$]*)?)$/i;
    if (regular.test(strUrl)) {
        return true;
    }
    else {
        return false;
    }
}
~~~
~~~
/* 
 * 检验身份证 
 */  
var checkIdCard = function(idCard) {  
    var aCity={11:"北京",12:"天津",13:"河北",14:"山西",15:"内蒙古",21:"辽宁",22:"吉林",23:"黑龙江",31:"上海",32:"江苏",33:"浙江",34:"安徽",35:"福建",36:"江西",37:"山东",41:"河南",42:"湖北",43:"湖南",44:"广东",45:"广西",46:"海南",50:"重庆",51:"四川",52:"贵州",53:"云南",54:"西藏",61:"陕西",62:"甘肃",63:"青海",64:"宁夏",65:"新疆",71:"台湾",81:"香港",82:"澳门",91:"国外"}  
    var iSum = 0;  
    var info = "";  
    if (!/^\d{17}(\d|x)$/i.test(idCard)){  
        return false;//身份证长度或格式错误  
    }  
    idCard = idCard.replace(/x$/i, "a");  
    if (aCity[parseInt(idCard.substr(0, 2))] == null){  
        return false;//身份证地区非法;  
    }  
    var sBirthday = idCard.substr(6, 4) + "-" + Number(idCard.substr(10, 2)) + "-" + Number(idCard.substr(12, 2));  
    var d = new Date(sBirthday.replace(/-/g, "/"));  
    if (sBirthday != (d.getFullYear() + "-" + (d.getMonth() + 1) + "-" + d.getDate())){  
        return false;//身份证上的出生日期非法;  
    }  
    for (var i = 17; i >= 0; i--){  
        iSum += (Math.pow(2, i) % 11) * parseInt(idCard.charAt(17 - i), 11);  
    }  
    if (iSum % 11 != 1){  
        return false;//身份证号非法;   
    }  
      
    return true;  
      
}
~~~
~~~
/* 
 * 检验邮箱 
 */  
var checkEmail = function(emailStr){  
    var reg = /^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+/;   
    if(!reg.test(emailStr)){  
        return false;  
    }  
    return true;  
}
~~~
~~~
/* 
 * 检验日期 
 * 格式为YYYY-MM-DD 
 */  
var checkDate = function(dateValue) {  
    var result = dateValue.match(/((^((1[8-9]\d{2})|([2-9]\d{3}))(-)(10|12|0?[13578])(-)(3[01]|[12][0-9]|0?[1-9])$)|(^((1[8-9]\d{2})|([2-9]\d{3}))(-)(11|0?[469])(-)(30|[12][0-9]|0?[1-9])$)|(^((1[8-9]\d{2})|([2-9]\d{3}))(-)(0?2)(-)(2[0-8]|1[0-9]|0?[1-9])$)|(^([2468][048]00)(-)(0?2)(-)(29)$)|(^([3579][26]00)(-)(0?2)(-)(29)$)|(^([1][89][0][48])(-)(0?2)(-)(29)$)|(^([2-9][0-9][0][48])(-)(0?2)(-)(29)$)|(^([1][89][2468][048])(-)(0?2)(-)(29)$)|(^([2-9][0-9][2468][048])(-)(0?2)(-)(29)$)|(^([1][89][13579][26])(-)(0?2)(-)(29)$)|(^([2-9][0-9][13579][26])(-)(0?2)(-)(29)$))/);  
    if (result == null) {  
        return false;  
    }  
    return true;  
} 
~~~
~~~
/* 
 * 检验金额 
 */  
var checkMoney = function(money) {  
    if (money == '') {  
        return false;  
    }  
    money = money.replace(/(^\s*)|(\s*$)/g, "");  
    var reg = /^[0-9]*\.?[0-9]{0,2}$/;  
    if (!checkNum(money)) {  
        return false;  
    }  
    if (money.length > 3) {  
        if (money.substr(0, 1) == "0") {  
            if (money.substr(3, money.length).length > 2) {  
                return false;  
            }  
        }  
    }  
    if(!reg.test(money)){  
        return false;  
    }  
    return true;  
}
~~~
~~~
/* 
 * 检验否是汉字  
 */  
var checkCharacter = function(charValue) {  
    var reg = /^[\u4e00-\u9fa5]{0,}$/;  
    if(!reg.test(charValue)){  
        return false;  
    }  
    return true;  
} 
~~~
# 校验数字的表达式
~~~
1 数字：^[0-9]*$ 

2 n位的数字：^\d{n}$

3 至少n位的数字：^\d{n,}$ 

4 m-n位的数字：^\d{m,n}$ 

5 零和非零开头的数字：^(0|[1-9][0-9]*)$ 

6 非零开头的最多带两位小数的数字：^([1-9][0-9]*)+(.[0-9]{1,2})?$ 

7 带1-2位小数的正数或负数：^(\-)?\d+(\.\d{1,2})?$ 

8 正数、负数、和小数：^(\-|\+)?\d+(\.\d+)?$ 

9 有两位小数的正实数：^[0-9]+(.[0-9]{2})?$

10 有1~3位小数的正实数：^[0-9]+(.[0-9]{1,3})?$

11 非零的正整数：^[1-9]\d*$ 或 ^([1-9][0-9]*){1,3}$ 或 ^\+?[1-9][0-9]*$

12 非零的负整数：^\-[1-9][]0-9"*$ 或 ^-[1-9]\d*$

13 非负整数：^\d+$ 或 ^[1-9]\d*|0$

14 非正整数：^-[1-9]\d*|0$ 或 ^((-\d+)|(0+))$

15 非负浮点数：^\d+(\.\d+)?$ 或 ^[1-9]\d*\.\d*|0\.\d*[1-9]\d*|0?\.0+|0$

16 非正浮点数：^((-\d+(\.\d+)?)|(0+(\.0+)?))$ 或 ^(-([1-9]\d*\.\d*|0\.\d*[1-9]\d*))|0?\.0+|0$

17 正浮点数：^[1-9]\d*\.\d*|0\.\d*[1-9]\d*$ 或 ^(([0-9]+\.[0-9]*[1-9][0-9]*)|([0-9]*[1-9][0-9]*\.[0-9]+)|([0-9]*[1-9][0-9]*))$

18 负浮点数：^-([1-9]\d*\.\d*|0\.\d*[1-9]\d*)$ 或 ^(-(([0-9]+\.[0-9]*[1-9][0-9]*)|([0-9]*[1-9][0-9]*\.[0-9]+)|([0-9]*[1-9][0-9]*)))$

19 浮点数：^(-?\d+)(\.\d+)?$ 或 ^-?([1-9]\d*\.\d*|0\.\d*[1-9]\d*|0?\.0+|0)$
~~~
# 校验字符的表达式
~~~
1 汉字：^[\u4e00-\u9fa5]{0,}$ 

2 英文和数字：^[A-Za-z0-9]+$ 或 ^[A-Za-z0-9]{4,40}$ 

3 长度为3-20的所有字符：^.{3,20}$ 

4 由26个英文字母组成的字符串：^[A-Za-z]+$ 

5 由26个大写英文字母组成的字符串：^[A-Z]+$ 

6 由26个小写英文字母组成的字符串：^[a-z]+$ 

7 由数字和26个英文字母组成的字符串：^[A-Za-z0-9]+$ 

8 由数字、26个英文字母或者下划线组成的字符串：^\w+$ 或 ^\w{3,20}$ 

9 中文、英文、数字包括下划线：^[\u4E00-\u9FA5A-Za-z0-9_]+$

10 中文、英文、数字但不包括下划线等符号：^[\u4E00-\u9FA5A-Za-z0-9]+$ 或 ^[\u4E00-\u9FA5A-Za-z0-9]{2,20}$

11 可以输入含有^%&',;=?$\"等字符：[^%&',;=?$\x22]+

12 禁止输入含有~的字符：[^~\x22]+
~~~
# 特殊需求表达式
~~~
1 Email地址：^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$ 

2 域名：[a-zA-Z0-9][-a-zA-Z0-9]{0,62}(/.[a-zA-Z0-9][-a-zA-Z0-9]{0,62})+/.? 

3 InternetURL：[a-zA-z]+://[^\s]* 或 ^http://([\w-]+\.)+[\w-]+(/[\w-./?%&=]*)?$ 

4 手机号码：^(13[0-9]|14[5|7]|15[0|1|2|3|5|6|7|8|9]|18[0|1|2|3|5|6|7|8|9])\d{8}$ 

5 电话号码("XXX-XXXXXXX"、"XXXX-XXXXXXXX"、"XXX-XXXXXXX"、"XXX-XXXXXXXX"、"XXXXXXX"和"XXXXXXXX)：^(\(\d{3,4}-)|\d{3.4}-)?\d{7,8}$  

6 国内电话号码(0511-4405222、021-87888822)：\d{3}-\d{8}|\d{4}-\d{7} 

7 身份证号(15位、18位数字)：^\d{15}|\d{18}$ 

8 短身份证号码(数字、字母x结尾)：^([0-9]){7,18}(x|X)?$ 或 ^\d{8,18}|[0-9x]{8,18}|[0-9X]{8,18}?$ 

9 帐号是否合法(字母开头，允许5-16字节，允许字母数字下划线)：^[a-zA-Z][a-zA-Z0-9_]{4,15}$

10 密码(以字母开头，长度在6~18之间，只能包含字母、数字和下划线)：^[a-zA-Z]\w{5,17}$

11 强密码(必须包含大小写字母和数字的组合，不能使用特殊字符，长度在8-10之间)：^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,10}$

12 日期格式：^\d{4}-\d{1,2}-\d{1,2}

13 一年的12个月(01～09和1～12)：^(0?[1-9]|1[0-2])$

14 一个月的31天(01～09和1～31)：^((0?[1-9])|((1|2)[0-9])|30|31)$

15 钱的输入格式：

16 1.有四种钱的表示形式我们可以接受:"10000.00" 和 "10,000.00", 和没有 "分" 的 "10000" 和 "10,000"：^[1-9][0-9]*$

17 2.这表示任意一个不以0开头的数字,但是,这也意味着一个字符"0"不通过,所以我们采用下面的形式：^(0|[1-9][0-9]*)$

18 3.一个0或者一个不以0开头的数字.我们还可以允许开头有一个负号：^(0|-?[1-9][0-9]*)$

19 4.这表示一个0或者一个可能为负的开头不为0的数字.让用户以0开头好了.把负号的也去掉,因为钱总不能是负的吧.下面我们要加的是说明可能的小数部分：^[0-9]+(.[0-9]+)?$

20 5.必须说明的是,小数点后面至少应该有1位数,所以"10."是不通过的,但是 "10" 和 "10.2" 是通过的：^[0-9]+(.[0-9]{2})?$

21 6.这样我们规定小数点后面必须有两位,如果你认为太苛刻了,可以这样：^[0-9]+(.[0-9]{1,2})?$

22 7.这样就允许用户只写一位小数.下面我们该考虑数字中的逗号了,我们可以这样：^[0-9]{1,3}(,[0-9]{3})*(.[0-9]{1,2})?$

23 8.1到3个数字,后面跟着任意个 逗号+3个数字,逗号成为可选,而不是必须：^([0-9]+|[0-9]{1,3}(,[0-9]{3})*)(.[0-9]{1,2})?$

24 备注：这就是最终结果了,别忘了"+"可以用"*"替代如果你觉得空字符串也可以接受的话(奇怪,为什么?)最后,别忘了在用函数时去掉去掉那个反斜杠,一般的错误都在这里

25 xml文件：^([a-zA-Z]+-?)+[a-zA-Z0-9]+\\.[x|X][m|M][l|L]$

26 中文字符的正则表达式：[\u4e00-\u9fa5]

27 双字节字符：[^\x00-\xff] (包括汉字在内，可以用来计算字符串的长度(一个双字节字符长度计2，ASCII字符计1))

28 空白行的正则表达式：\n\s*\r (可以用来删除空白行)

29 HTML标记的正则表达式：<(\S*?)[^>]*>.*?</\1>|<.*? /> (网上流传的版本太糟糕，上面这个也仅仅能部分，对于复杂的嵌套标记依旧无能为力)

30 首尾空白字符的正则表达式：^\s*|\s*$或(^\s*)|(\s*$) (可以用来删除行首行尾的空白字符(包括空格、制表符、换页符等等)，非常有用的表达式)

31 腾讯QQ号：[1-9][0-9]{4,} (腾讯QQ号从10000开始)

32 中国邮政编码：[1-9]\d{5}(?!\d) (中国邮政编码为6位数字) 
~~~
~~~
// nowLv表示密码的强度
function checkPwd(str) {
 var nowLv = 0;
 if (str.length < 6) {
 return nowLv
 }
 ;
 if (/[0-9]/.test(str)) {
 nowLv++
 }
 ;
 if (/[a-z]/.test(str)) {
 nowLv++
 }
 ;
 if (/[A-Z]/.test(str)) {
 nowLv++
 }
 ;
 if (/[\.|-|_]/.test(str)) {
 nowLv++
 }
 ;
 return nowLv;
}
checkPwd('123') // 0
checkPwd('123ASHD') // 2
checkPwd('12asdASAD') // 3
checkPwd('123ASHD)(&!a_') // 4
~~~
~~~
var BrowserInfo = {    
    userAgent: navigator.userAgent.toLowerCase()
    isAndroid: Boolean(navigator.userAgent.match(/android/ig)),
    isIphone: Boolean(navigator.userAgent.match(/iphone|ipod/ig)),
    isIpad: Boolean(navigator.userAgent.match(/ipad/ig)),
    isWeixin: Boolean(navigator.userAgent.match(/MicroMessenger/ig)),
}
~~~

~~~
/**
 * 判断是否移动设备
 */
function isMobile() {
    if (typeof this._isMobile === 'boolean') {
        return this._isMobile;
    }
    var screenWidth = this.getScreenWidth();
    var fixViewPortsExperiment = rendererModel.runningExperiments.FixViewport
            || rendererModel.runningExperiments.fixviewport;
    var fixViewPortsExperimentRunning = fixViewPortsExperiment
            && (fixViewPortsExperiment.toLowerCase() === "new");
    if (!fixViewPortsExperiment) {
        if (!this.isAppleMobileDevice()) {
            screenWidth = screenWidth / window.devicePixelRatio;
        }
    }
    var isMobileScreenSize = screenWidth < 600;
    var isMobileUserAgent = false;
    this._isMobile = isMobileScreenSize && this.isTouchScreen();
    return this._isMobile;
}
~~~

~~~
/**
 * 判断是否移动设备访问
 */
function isMobileUserAgent() {
    return (/iphone|ipod|android.*mobile|windows.*phone|blackberry.*mobile/i
            .test(window.navigator.userAgent.toLowerCase()));
}
~~~

~~~
/**
 * 判断是否苹果移动设备访问
 */
function isAppleMobileDevice() {
    return (/iphone|ipod|ipad|Macintosh/i.test(navigator.userAgent
            .toLowerCase()));
}
~~~

~~~
/**
 * 判断是否安卓移动设备访问
 */
function isAndroidMobileDevice() {
    return (/android/i.test(navigator.userAgent.toLowerCase()));
}
~~~

~~~
/**
 * 判断是否Touch屏幕
 */
function isTouchScreen() {
    return (('ontouchstart' in window) || window.DocumentTouch
            && document instanceof DocumentTouch);
}
~~~

~~~
/**
 * 判断是否在安卓上的谷歌浏览器
 */
function isNewChromeOnAndroid() {
    if (this.isAndroidMobileDevice()) {
        var userAgent = navigator.userAgent.toLowerCase();
        if ((/chrome/i.test(userAgent))) {
            var parts = userAgent.split('chrome/');

            var fullVersionString = parts[1].split(" ")[0];
            var versionString = fullVersionString.split('.')[0];
            var version = parseInt(versionString);

            if (version >= 27) {
                return true;
            }
        }
    }
    return false;
}
~~~
~~~
function strLength(str) { 
    var a = 0;            
    for (var i = 0; i < str.length; i++) {
    if (str.charCodeAt(i) > 255)
    a += 2;//按照预期计数增加2
    else
    a++;
    }
    return a;
 }
~~~
~~~
function GetQueryStringRegExp(name,url) {
var reg = new RegExp("(^|\\?|&)" + name + "=([^&]*)(\\s|&|$)", "i"); 
if (reg.test(url)) 
    return decodeURIComponent(RegExp.$2.replace(/\+/g, " ")); 
}
~~~
~~~
function eventBind(obj, eventType, callBack) {
    if (obj.addEventListener) {
        obj.addEventListener(eventType, callBack, false);
    }else if (window.attachEvent) {
        obj.attachEvent('on' + eventType, callBack);
    }else {
        obj['on' + eventType] = callBack;
    }
};
eventBind(document, 'click', bodyClick);
~~~


~~~
/**
 * 兼容浏览器绑定元素事件
 * 
 * obj：元素
 * 
 * evt:时间名称
 * 
 * fn:触发函数
 * 
 */

function addEventSamp(obj, evt, fn) {
    if (obj.addEventListener) {
        obj.addEventListener(evt, fn, false);
    } else if (obj.attachEvent) {
        obj.attachEvent('on' + evt, fn);
    }
}
~~~
~~~
function getjsversion(){    
    var n = navigator;    
    var u = n.userAgent;    
    var apn = n.appName;   
    var v = n.appVersion;    
    var ie = v.indexOf('MSIE ');    
    if (ie > 0){
        apv = parseInt(i = v.substring(ie + 5));        
        if (apv > 3) {
            apv = parseFloat(i);
        }
    } else {
        apv = parseFloat(v);
    }
    var isie = (apn == 'Microsoft Internet Explorer');    
    var ismac = (u.indexOf('Mac') >= 0);    
    var javascriptVersion = "1.0";    
    if (String && String.prototype) {
        javascriptVersion = '1.1';        
        if (javascriptVersion.match) {
            javascriptVersion = '1.2';            
            var tm = new Date;            
            if (tm.setUTCDate) {
                javascriptVersion = '1.3';                
                if (isie && ismac && apv >= 5) 
                javascriptVersion = '1.4';                
                var pn = 0;                
                if (pn.toPrecision) {
                    javascriptVersion = '1.5';
                    a = new Array;                    
                    if (a.forEach) {
                        javascriptVersion = '1.6';
                        i = 0;
                        o = new Object;
                        tcf = new Function('o', 'var e,i=0;try{i=new Iterator(o)}catch(e){}return i');
                        i = tcf(o);                        
                        if (i && i.next) {
                            javascriptVersion = '1.7';
                        }
                    }
                }
            }
        }
    }    
    return javascriptVersion;
}
~~~
~~~
function getEvent() {    
    if (document.all) {        
    return window.event; //如果是ie
    }
    func = getEvent.caller;    
    while (func != null) {        
    var arg0 = func.arguments[0];        
    if (arg0) {            
    if ((arg0.constructor == Event || arg0.constructor == MouseEvent)
|| (typeof (arg0) == "object" && arg0.preventDefault && arg0.stopPropagation)) {
            return arg0;
            }
        }
        func = func.caller;
    }    
    return null;
};
~~~
~~~
getCharactersLen: function (charStr, cutCount) {
    if (charStr == null || charStr == '') 
    return '';        
    var totalCount = 0;        
    var newStr = '';        
    for (var i = 0; i < charStr.length; i++) {            
    var c = charStr.charCodeAt(i);            
    if (c < 255 && c > 0) {
        totalCount++;
    } else {
        totalCount += 2;
    } 
    if (totalCount >= cutCount) {
        newStr += charStr.charAt(i);
        break;
    }else {
        newStr += charStr.charAt(i);
        }
   }        
   return newStr;
}
~~~
~~~
var tmp = window.open("about:blank", "", "fullscreen=1")
tmp.moveTo(0, 0);
tmp.resizeTo(screen.width + 20, screen.height);
tmp.focus();
tmp.location.href = 'http://www.che168.com/pinggu/eva_' + msgResult.message[0] + '.html';
var config_ = "left=0,top=0,width=" + (window.screen.Width) + ",height=" + (window.screen.Height);                            
window.open('http://www.che168.com/pinggu/eva_' + msgResult.message[0] + '.html', "winHanle", config_);
//模拟form提交打开新页面
var f = document.createElement("form");
f.setAttribute('action', 'http://www.che168.com/pinggu/eva_' + msgResult.message[0] + '.html');
f.target = '_blank';
document.body.appendChild(f);
f.submit();
~~~
~~~
function selectAll(objSelect) {
    if (objSelect.checked == true) {
    $("input[name='chkId']").attr("checked", true);
    $("input[name='chkAll']").attr("checked", true);
    }else if (objSelect.checked == false) {
    $("input[name='chkId']").attr("checked", false);
    $("input[name='chkAll']").attr("checked", false);
    }
}
~~~
~~~
/**
 * 实现checkbox全选与全不选
 */
function checkAll(selectAllBoxId, childBoxsId) {
    var selectall = document.getElementById(selectAllBoxId);
    var allbox = document.getElementsByName(childBoxsId);
    if (selectall.checked) {
        for ( var i = 0; i < allbox.length; i++) {
            allbox[i].checked = true;
        }
    } else {
        for ( var i = 0; i < allbox.length; i++) {
            allbox[i].checked = false;
        }
    }
}
~~~
~~~
判断是否是 IE 浏览器
if (document.all){ 
    alert(”IE浏览器”); 
}else{ 
    alert(”非IE浏览器”); 
} 
if (!!window.ActiveXObject){ 
    alert(”IE浏览器”); 
}else{ 
    alert(”非IE浏览器”); 
} 
判断是IE几
var isIE=!!window.ActiveXObject; 
var isIE6=isIE&&!window.XMLHttpRequest; 
var isIE8=isIE&&!!document.documentMode; 
var isIE7=isIE&&!isIE6&&!isIE8; 
if (isIE){ 
    if (isIE6){ 
        alert(”ie6″); 
    }else if (isIE8){ 
        alert(”ie8″); 
    }else if (isIE7){ 
        alert(”ie7″); 
    } 
}
~~~
判断浏览器
~~~
function getOs() {    
if (navigator.userAgent.indexOf("MSIE 8.0") > 0) {        
    return "MSIE8";
}else if (navigator.userAgent.indexOf("MSIE 6.0") > 0) {
    return "MSIE6";
}else if (navigator.userAgent.indexOf("MSIE 7.0") > 0) {
    return "MSIE7";
}else if (isFirefox = navigator.userAgent.indexOf("Firefox") > 0) {
    return "Firefox";
}
if (navigator.userAgent.indexOf("Chrome") > 0) {
    return "Chrome";
}else {
    return "Other";
    }
}
~~~
~~~
//得到日期值并转化成日期格式
//replace(/\-/g, "\/")是根据验证表达式把日期转化成长日期格式
//这样再进行判断就好判断了function ValidateDate() {
    var beginDate = $("#t_datestart").val();
    var endDate = $("#t_dateend").val();
    if (beginDate.length > 0 && endDate.length>0) {
        var sDate = new Date(beginDate.replace(/\-/g, "\/"));                
        var eDate= new Date(endDate.replace(/\-/g, "\/"));                
        if (sDate > eDate) {
            alert('开始日期要小于结束日期'); 
            return false;
        }
    }
}
~~~
~~~
this.moveBind = function (objId, eventType, callBack) {
    var obj = document.getElementById(objId);
    if (obj.removeEventListener) {
        obj.removeEventListener(eventType, callBack, false);
    }else if (window.detachEvent) {
        obj.detachEvent('on' + eventType, callBack);
    }else {
        obj['on' + eventType] = null;
    }
}
~~~
~~~
$("id").onkeypress = function (event) {    
    event = (event) ? event : ((window.event) ? window.event : "")
    keyCode = event.keyCode ? event.keyCode : (event.which ? event.which : event.charCode);    
    if (keyCode == 13) {
        $("SubmitLogin").onclick();
    }
}
~~~
~~~
timeStart = new Date().getTime();
timesEnd = new Date().getTime();
document.getElementById("time").innerHTML = timesEnd - timeStart;
~~~
~~~
function setCookie(name, value, expires, path, domain) {
    if (!expires) 
    expires = -1;
    if (!path) 
    path = "/";
    var d = "" + name + "=" + value;
    var e;
    if (expires < 0) {
        e = "";
    }else if (expires == 0) {
        var f = new Date(1970, 1, 1);
        e = ";expires=" + f.toUTCString();
    }else {
        var now = new Date();
        var f = new Date(now.getTime() + expires * 1000);
        e = ";expires=" + f.toUTCString();
    }
    var dm;
    if (!domain) {
        dm = "";
    }else {
        dm = ";domain=" + domain;
    }
    document.cookie = name + "=" + value + ";path=" + path + e + dm;
};
~~~


~~~
/**
 * 设置cookie值 escape(str) 对值进行编码 unescape(str)进行解码 (ECMAScript v3 反对使用该方法，应用使用
 * decodeURI() 和 decodeURIComponent() 替代它。)
 * 
 * param:
 * 
 * name:名称
 * 
 * value:名称对应值
 * 
 * path:为了控制cookie可以访问的目录 例： path=/shop";就表示当前cookie仅能在shop目录下使用（url地址）。
 * 
 * expires:过期时间 F * domain : 指定可访问cookie的主机名 域名
 */
function setCookie(name, value, Hours) {
    var d = new Date();
    var offset = 8;
    var utc = d.getTime() + (d.getTimezoneOffset() * 60000);
    var nd = utc + (3600000 * offset);
    var exp = new Date(nd);
    exp.setTime(exp.getTime() + Hours * 60 * 60 * 1000);
    document.cookie = name + "=" + escape(value) + ";path=/;expires="
            + exp.toGMTString() + ";domain=sicd.com;";
}
~~~
~~~
function readCookie(name) {
    var nameEQ = name + "=";
    var ca = document.cookie.split(';');
    for (var i = 0; i < ca.length; i++) {
        var c = ca[i];
        while (c.charAt(0) == ' ') c = c.substring(1, c.length);
        if (c.indexOf(nameEQ) == 0) {
            return decodeURIComponent(c.substring(nameEQ.length, c.length))
        }
    } 
    return null
}
~~~

~~~
/**
 * 获取cookie值 unescape()不推荐使用 用 decodeURI()
 * 
 */
function getCookie(name) {
    var arr = document.cookie
            .match(new RegExp("(^| )" + name + "=([^;]*)(;|$)"));
    if (arr != null)
        return unescape(arr[2]);
    return null;
}
~~~
~~~
C.ajax = function (args) {    var self = this;
    this.options = {
        type: 'GET',
        async: true,
        contentType: 'application/x-www-form-urlencoded',
        url: 'about:blank',
        data: null,
        success: {},
        error: {}
    };
    this.getXmlHttp = function () {
    var xmlHttp;
    try {
        xmlhttp = new XMLHttpRequest();
    }catch (e) {
        try {
            xmlhttp = new ActiveXObject("Msxml2.XMLHTTP");
        }catch (e) {
            xmlHttp = new ActiveXObject("Microsoft.XMLHTTP");
        }
    }if (!xmlhttp) {
        alert('您的浏览器不支持AJAX');
        return false;
    }
        return xmlhttp;
    };
    this.send = function () {
    C.each(self.options, function (key, val) {
    self.options[key] = (args[key] == null) ? val : args[key];
    });
    var xmlHttp = new self.getXmlHttp();
    if (self.options.type.toUpperCase() == 'GET') {
        xmlHttp.open(self.options.type, self.options.url + (self.options.data == null ? "" : ((/[?]$/.test(self.options.url) ? '&' : '?') + self.options.data)), self.options.async);
    }else {
        xmlHttp.open(self.options.type, self.options.url, self.options.async);
        xmlHttp.setRequestHeader('Content-Length', self.options.data.length);
    }
        xmlHttp.setRequestHeader('Content-Type', self.options.contentType);
        xmlHttp.onreadystatechange = function () {
        if (xmlHttp.readyState == 4) {
        if (xmlHttp.status == 200 || xmlHttp.status == 0) {                    if (typeof self.options.success == 'function') self.options.success(xmlHttp.responseText);
            xmlHttp = null;
        }else {
        if (typeof self.options.error == 'function') 
        self.options.error('Server Status: ' + xmlHttp.status);
                }
            }
        };
        xmlHttp.send(self.options.type.toUpperCase() == 'POST' ? self.options.data.toString() : null);
    };
    this.send();
};
~~~
~~~
function StringBuilder() {
this.strings = new Array;
};
StringBuilder.prototype.append = function (str) {
this.strings.push(str);
};
StringBuilder.prototype.toString = function () {
return this.strings.join('');
};
~~~
~~~
function loadJS (url, fn) {
    var ss = document.getElementsByName('script'),
    loaded = false;
    for (var i = 0, len = ss.length; i < len; i++) {
        if (ss[i].src && ss[i].getAttribute('src') == url) {
            loaded = true;
            break;
            }
    }
    if (loaded) {
        if (fn && typeof fn != 'undefined' && fn instanceof Function) 
        fn();            
        return false;
    }
    var s = document.createElement('script'),
    b = false;
    s.setAttribute('type', 'text/javascript');
    s.setAttribute('src', url);
    s.onload = s.onreadystatechange = function () {
    if (!b && (!this.readyState || this.readyState == 'loaded' || this.readyState == 'complete')) {
        b = true; 
        if (fn && typeof fn != 'undefined' && fn instanceof Function) 
        fn();
        }
    };
    document.getElementsByTagName('head')[0].appendChild(s);
    },
bind: 
function (objId, eventType, callBack) {  //适用于任何浏览器的绑定
        var obj = document.getElementById(objId);        
        if (obj.addEventListener) {
            obj.addEventListener(eventType, callBack, false);
        }else if (window.attachEvent) {
            obj.attachEvent('on' + eventType, callBack);
        }else {
            obj['on' + eventType] = callBack;
        }
}
function JSLoad (args) { 
        s = document.createElement("script");
        s.setAttribute("type", "text/javascript");
        s.setAttribute("src", args.url);
        s.onload = s.onreadystatechange = function () {
    if (!s.readyState || s.readyState == "loaded" || s.readyState == "complete") {
        if (typeof args.callback == "function") 
            args.callback(this, args);
            s.onload = s.onreadystatechange = null;                
            try {
                s.parentNode && s.parentNode.removeChild(s);
                } catch (e) { }
            }
        };        
        document.getElementsByTagName("head")[0].appendChild(s);
    }
~~~
~~~
function ClearHeadJs  (src) { 
        var js = document.getElementsByTagName('head')[0].children;
        var obj = null;
        for (var i = 0; i < js.length; i++) {
        if (js[i].tagName.toLowerCase() == "script" && js[i].attributes['src'].value.indexOf(src) > 0) {
            obj = js[i];
           }
        }
        document.getElementsByTagName('head')[0].removeChild(obj);
};
~~~
主要用在密码验证上出现的特殊字符
~~~
function URLencode(sStr) {
return escape(sStr).replace(/\+/g, '%2B').replace(/\"/g, '%22').replace(/\'/g, '%27').replace(/\//g, '%2F');
};
~~~
~~~
document.body.onkeydown = function (evt) {
        evt = evt ? evt : (window.event ? window.event : null);
        if (13 == evt.keyCode && evt.ctrlKey) {
            evt.returnValue = false;
            evt.cancel = true;
            PostData();
        }
};
~~~
~~~
function GetCurrentDate() {
        var d = new Date();
        var y = d.getYear()+1900;
        month = add_zero(d.getMonth() + 1),
        days = add_zero(d.getDate()),
        hours = add_zero(d.getHours());
        minutes = add_zero(d.getMinutes()),
        seconds = add_zero(d.getSeconds());
        var str = y + '-' + month + '-' + days + ' ' + hours + ':' + minutes + ':' + seconds;        
        return str;
    }; 
function add_zero(temp) {
    if (temp < 10) return "0" + temp;
    else return temp;
}
~~~
~~~
String.prototype.Trim = function(){ 
    return this.replace(/(^\s*)|(\s*$)/g, ""); 
    }
String.prototype.LTrim = function(){
    return this.replace(/(^\s*)/g, "");
    }
String.prototype.RTrim = function(){
    return this.replace(/(\s*$)/g, "");
    }
~~~
~~~
this.ClearHeadJs = function (src) {
    var js = document.getElementsByTagName('head')[0].children;
    var obj = null;
    for (var i = 0; i < js.length; i++) {
    if (js[i].tagName.toLowerCase() == "script" && js[i].attributes['src'].value.indexOf(src) > 0) {
        obj = js[i];
    }
    }
    document.getElementsByTagName('head')[0].removeChild(obj);
};
~~~
~~~
function CreateFrom(url, params) {
    var f = document.createElement("form");
    f.setAttribute("action", url);
    for (var i = 0; i < params.length; i++) {
         var input = document.createElement("input");
         input.setAttribute("type", "hidden");
         input.setAttribute("name", params[i].paramName);
         input.setAttribute("value", params[i].paramValue);
         f.appendChild(input);
    }
    f.target = "_blank";
    document.body.appendChild(f);            
    f.submit();
};
~~~
~~~
<script language="javascript">
      var jsversion = 1.0;    
  </script>
    <script language="javascript1.1">
      jsversion = 1.1;    
  </script>
    <script language="javascript1.2">
      jsversion = 1.2;    
  </script>
    ......
    ......
   <script language="javascript1.9">
      jsversion = 1.9;    
  </script>
    <script language="javascript2.0">
 	 jsversion = 2.0;    
  </script>
    alert(jsversion);
~~~


~~~
/**
 * 返回浏览器版本
 * 
 * 返回一个对象,对象属性：type，version
 */

function getExplorerInfo() {
    var explorer = window.navigator.userAgent.toLowerCase();
    // ie
    if (explorer.indexOf("msie") >= 0) {
        var ver = explorer.match(/msie ([\d.]+)/)[1];
        return {
            type : "IE",
            version : ver
        };
    }
    // firefox
    else if (explorer.indexOf("firefox") >= 0) {
        var ver = explorer.match(/firefox\/([\d.]+)/)[1];
        return {
            type : "Firefox",
            version : ver
        };
    }
    // Chrome
    else if (explorer.indexOf("chrome") >= 0) {
        var ver = explorer.match(/chrome\/([\d.]+)/)[1];
        return {
            type : "Chrome",
            version : ver
        };
    }
    // Opera
    else if (explorer.indexOf("opera") >= 0) {
        var ver = explorer.match(/opera.([\d.]+)/)[1];
        return {
            type : "Opera",
            version : ver
        };
    }
    // Safari
    else if (explorer.indexOf("Safari") >= 0) {
        var ver = explorer.match(/version\/([\d.]+)/)[1];
        return {
            type : "Safari",
            version : ver
        };
    }
}
~~~
~~~
/**
 * 加入收藏夹
 */
function AddFavorite(sURL, sTitle) {
    try {
        window.external.addFavorite(sURL, sTitle);
    } catch (e) {
        try {
            window.sidebar.addPanel(sTitle, sURL, "");
        } catch (e) {
            alert("加入收藏失败，请使用Ctrl+D进行添加");
        }
    }
}
~~~
~~~
/**
 * 动态加载 CSS 样式文件
 */
function LoadStyle(url) {
    try {
        document.createStyleSheet(url);
    } catch (e) {
        var cssLink = document.createElement('link');
        cssLink.rel = 'stylesheet';
        cssLink.type = 'text/css';
        cssLink.href = url;
        var head = document.getElementsByTagName('head')[0];
        head.appendChild(cssLink);
    }
}
~~~
~~~
/**
 * 返回脚本内容
 */
function evalscript(s) {
    if (s.indexOf('<script') == -1)
        return s;
    var p = /<script[^\>]*?>([^\x00]*?)<\/script>/ig;
    var arr = [];
    while (arr = p.exec(s)) {
        var p1 = /<script[^\>]*?src=\"([^\>]*?)\"[^\>]*?(reload=\"1\")?(?:charset=\"([\w\-]+?)\")?><\/script>/i;
        var arr1 = [];
        arr1 = p1.exec(arr[0]);
        if (arr1) {
            appendscript(arr1[1], '', arr1[2], arr1[3]);
        } else {
            p1 = /<script(.*?)>([^\x00]+?)<\/script>/i;
            arr1 = p1.exec(arr[0]);
            appendscript('', arr1[2], arr1[1].indexOf('reload=') != -1);
        }
    }
    return s;
}
~~~
~~~
/**
 * 清除脚本内容
 */
function stripscript(s) {
    return s.replace(/<script.*?>.*?<\/script>/ig, '');
}
~~~
~~~
/**
 * 返回按ID检索的元素对象
 */
try {
    if (typeof (eval('$')) == "function") {
    } else {
        function $(id) {
            return !id ? null : document.getElementById(id);
        }
    }
} catch (e) {
    function $(id) {
        return !id ? null : document.getElementById(id);
    }
}
~~~
~~~
/**
 * 显示元素 待验证 visibility hideen 会隐藏元素，但是会占用作用域
 */
// function $(id) {
// return !id ? null : document.getElementById(id);
// }
function display(id) {
    var obj = $(id);
    if (obj.style.visibility) {
        obj.style.visibility = obj.style.visibility == 'visible' ? 'hidden'
                : 'visible';
    } else {
        obj.style.display = obj.style.display == '' ? 'none' : '';
    }
}
~~~
~~~
/**
 * 与insertBefore方法（已存在）对应的insertAfter方法
 * 
 * 
 */
function insertAfter(newChild, refChild) {
    var parElem = refChild.parentNode;
    if (parElem.lastChild == refChild) {
        refChild.appendChild(newChild);
    } else {
        parElem.insertBefore(newChild, refChild.nextSibling);
    }
}
~~~
~~~
/**
 * 光标停在文字的后面，文本框获得焦点时调用
 */
function focusLast() {
    var e = event.srcElement;
    var r = e.createTextRange();
    r.moveStart('character', e.value.length);
    r.collapse(true);
    r.select();
}
~~~
~~~
/**
 * 检验URL链接是否有效
 * 
 * .Open("GET",URL, false) true:异步；false:同步
 */
function getUrlState(URL) {
    var suc = false;
    var xmlhttp = new ActiveXObject("microsoft.xmlhttp");
    xmlhttp.Open("GET", URL, false);
    try {
        xmlhttp.Send();
    } catch (e) {
    } finally {
        var result = xmlhttp.responseText;
        if (result) {
            if (xmlhttp.Status == 200) {
                suc = true;
            } else {
                suc = false;
            }
        } else {
            suc = false;
        }
    }
    return suc;
}
~~~
~~~
/**
 * 格式化CSS样式代码
 */
function formatCss(s) {// 格式化代码
    s = s.replace(/\s*([\{\}\:\;\,])\s*/g, "$1");
    s = s.replace(/;\s*;/g, ";"); // 清除连续分号
    s = s.replace(/\,[\s\.\#\d]*{/g, "{");
    s = s.replace(/([^\s])\{([^\s])/g, "$1 {\n\t$2");
    s = s.replace(/([^\s])\}([^\n]*)/g, "$1\n}\n$2");
    s = s.replace(/([^\s]);([^\s\}])/g, "$1;\n\t$2");
    return s;
}
~~~
~~~
/**
 * 压缩CSS样式代码
 */
function yasuoCss(s) {// 压缩代码
    s = s.replace(/\/\*(.|\n)*?\*\//g, ""); // 删除注释
    s = s.replace(/\s*([\{\}\:\;\,])\s*/g, "$1");
    s = s.replace(/\,[\s\.\#\d]*\{/g, "{"); // 容错处理
    s = s.replace(/;\s*;/g, ";"); // 清除连续分号
    s = s.match(/^\s*(\S+(\s+\S+)*)\s*$/); // 去掉首尾空白
    return (s == null) ? "" : s[1];
}
~~~
~~~
/**
 * 获取当前路径
 */
function getCurrentPageUrl() {
    var currentPageUrl = "";
    if (typeof this.href === "undefined") {
        currentPageUrl = document.location.toString().toLowerCase();
    } else {
        currentPageUrl = this.href.toString().toLowerCase();
    }
    return currentPageUrl;
}
~~~
~~~
/**
 * ip 转 整型
 */
function _ip2int(ip) {
    var num = 0;
    ip = ip.split(".");
    num = Number(ip[0]) * 256 * 256 * 256 + Number(ip[1]) * 256 * 256
            + Number(ip[2]) * 256 + Number(ip[3]);
    num = num >>> 0;
    return num;
}
~~~
~~~
/**
 * 整型解析为IP地址
 */
function _int2iP(num) {
    var str;
    var tt = new Array();
    tt[0] = (num >>> 24) >>> 0;
    tt[1] = ((num << 8) >>> 24) >>> 0;
    tt[2] = (num << 16) >>> 24;
    tt[3] = (num << 24) >>> 24;
    str = String(tt[0]) + "." + String(tt[1]) + "." + String(tt[2]) + "."
            + String(tt[3]);
    return str;
}
~~~
~~~
//删除cookies 
 function delCookie(name) 
 { 
     var exp = new Date(); 
     exp.setTime(exp.getTime() - 1); 
     var cval=getCookie(name); 
     if(cval!=null) 
         document.cookie= name + "="+cval+";expires="+exp.toGMTString(); 
~~~
 
~~~
/**
 * 判断是否以某个字符串结束
 */
if(!String.prototype.endWith){
 String.prototype.endWith = function (s) {
         var d = this.length - s.length;
         return (d >= 0 && this.lastIndexOf(s) == d);
     };
}
~~~
~~~
/**
 * 判断是否以某个字符串开头
 */
if(!String.prototype.startWith){
String.prototype.startWith = function (s) {
        return this.indexOf(s) == 0;
     };
}
~~~
~~~
/**
 * 根据样式名称检索元素对象
 */
function getElementsByClassName(name) {
    var tags = document.getElementsByTagName('*') || document.all;
    var els = [];
    for (var i = 0; i < tags.length; i++) {
        if (tags[i].className) {
            var cs = tags[i].className.split(' ');
            for (var j = 0; j < cs.length; j++) {
                if (name == cs[j]) {
                    els.push(tags[i]);
                    break;
                }
            }
        }
    }
    return els;
}
~~~
~~~
/**
 * 获取移动设备初始化大小
 */
function getInitZoom(){
    if(!this._initZoom){
        var screenWidth = Math.min(screen.height, screen.width);
        if(this.isAndroidMobileDevice() && !this.isNewChromeOnAndroid()){
            screenWidth = screenWidth/window.devicePixelRatio;
        }
        this._initZoom = screenWidth /document.body.offsetWidth;
    }
    return this._initZoom;
}
~~~
~~~
/**
 * 获取移动设备最大化大小
 */
function getZoom(){
    var screenWidth = (Math.abs(window.orientation) === 90) ? Math.max(screen.height, screen.width) : Math.min(screen.height, screen.width);
    if(this.isAndroidMobileDevice() && !this.isNewChromeOnAndroid()){
        screenWidth = screenWidth/window.devicePixelRatio;
    }
    var FixViewPortsExperiment = rendererModel.runningExperiments.FixViewport || rendererModel.runningExperiments.fixviewport;
    var FixViewPortsExperimentRunning = FixViewPortsExperiment && (FixViewPortsExperiment === "New" || FixViewPortsExperiment === "new");
    if(FixViewPortsExperimentRunning){
        return screenWidth / window.innerWidth;
    }else{
        return screenWidth / document.body.offsetWidth;
    }
}
~~~
~~~
/**
 * 获取移动设备屏幕宽度
 */
function getScreenWidth(){
    var smallerSide = Math.min(screen.width, screen.height);
    var fixViewPortsExperiment = rendererModel.runningExperiments.FixViewport || rendererModel.runningExperiments.fixviewport;
    var fixViewPortsExperimentRunning = fixViewPortsExperiment && (fixViewPortsExperiment.toLowerCase() === "new");
    if(fixViewPortsExperiment){
        if(this.isAndroidMobileDevice() && !this.isNewChromeOnAndroid()){
            smallerSide = smallerSide/window.devicePixelRatio;
        }
    }
    return smallerSide;
}
~~~
~~~
/**
 * 获取页面scrollLeft
 */
function getPageScrollLeft(){
         var a = document;
         return a.documentElement.scrollLeft || a.body.scrollLeft;
     }
~~~
~~~
/**
 * 获取页面宽度
 */
function getPageWidth(){
    var g = document, a = g.body, f = g.documentElement, d = g.compatMode == "BackCompat"
            ? a
            : g.documentElement;
    return Math.max(f.scrollWidth, a.scrollWidth, d.clientWidth);
}
~~~
~~~
/**
 * 获取页面scrollTop
 */    
 function getPageScrollTop(){
         var a = document;
         return a.documentElement.scrollTop || a.body.scrollTop;
     }
~~~
~~~
/**
 * 获取页面可视高度
 */
 function getPageViewHeight() {
        var d = document, a = d.compatMode == "BackCompat"
                ? d.body
                : d.documentElement;
        return a.clientHeight;
    }
~~~
~~~

var isRepeat = function(arr) {  //arr是否有重复元素
    var hash = {};
    for (var i in arr) {
        if (hash[arr[i］) return true;
        hash[arr[i］ = true;
    }
    return false;
    };
~~~
~~~


function randombetween(min, max){
    return min + (Math.random() * (max-min +1));
    }
~~~
~~~
var unique = function(arr) {
    var result = [], json = {};
    for (var i = 0, len = arr.length; i < len; i++){
        if (!json[arr[i］) {
            json[arr[i］ = 1;
            result.push(arr[i]);  //返回没被删除的元素
        }
    }
    return result;
    };
~~~
~~~
function cloneObj(obj) {
    var o = obj.constructor == Object ? new obj.constructor() : new obj.constructor(obj.valueOf());
    for(var key in obj){
        if(o[key] != obj[key] ){
            if(typeof(obj[key]) == 'object' ){
                o[key] = mods.cloneObj(obj[key]);
            }else{
                o[key] = obj[key];
            }
        }
    }
    return o;
    }
~~~
~~~
var replaceAll = function(bigStr, str1, str2) {  //把bigStr中的所有str1替换为str2
    var reg = new RegExp(str1, 'gm');
    return bigStr.replace(reg, str2);
    }
~~~
~~~
function stopBubble(e){
    e = e || window.event;  
    if(e.stopPropagation){
        e.stopPropagation();  //W3C阻止冒泡方法  
    }else {  
        e.cancelBubble = true; //IE阻止冒泡方法  
    }  
    }
~~~
~~~
$(window).scroll(function() {
    var a = $(window).scrollTop();
    if(a > 100) {
        $('.go-top').fadeIn();
    }else {
        $('.go-top').fadeOut();
    }
    });
$(".go-top").click(function(){
    $("html,body").animate({scrollTop:"0px"},'600');
    });
~~~
~~~
function jsonp(config) {
    var options = config || {};   // 需要配置url, success, time, fail四个属性
    var callbackName = ('jsonp_' + Math.random()).replace(".", "");
    var oHead = document.getElementsByTagName('head')[0];
    var oScript = document.createElement('script');
    oHead.appendChild(oScript);
    window[callbackName] = function(json) {  //创建jsonp回调函数
        oHead.removeChild(oScript);
        clearTimeout(oScript.timer);
        window[callbackName] = null;
        options.success && options.success(json);   //先删除script标签，实际上执行的是success函数
    };
    oScript.src = options.url + '?' + callbackName;    //发送请求
    if (options.time) {  //设置超时处理
        oScript.timer = setTimeout(function () {
            window[callbackName] = null;
            oHead.removeChild(oScript);
            options.fail && options.fail({ message: "超时" });
        }, options.time);
    }
    };
// 使用方法：
jsonp({
    url: '/b.com/b.json',
    success: function(d){
        //数据处理
    },
    time: 5000,
    fail: function(){
        //错误处理
    }       
    });
~~~
~~~
function getEndTime(endTime){
    var startDate=new Date();  //开始时间，当前时间
    var endDate=new Date(endTime); //结束时间，需传入时间参数
    var t=endDate.getTime()-startDate.getTime();  //时间差的毫秒数
    var d=0,h=0,m=0,s=0;
    if(t>=0){
      d=Math.floor(t/1000/3600/24);
      h=Math.floor(t/1000/60/60%24);
      m=Math.floor(t/1000/60%60);
      s=Math.floor(t/1000%60);
    } 
    return "剩余时间"+d+"天 "+h+"小时 "+m+" 分钟"+s+" 秒";
}

getEndTime('2018/8/8 8:0:0') // "剩余时间172天 12小时 10 分钟47 秒"
~~~

~~~
function filterParams(obj){
    let _newPar = {};
    for (let key in obj) {
        if ((obj[key] !== 0 && obj[key]) && obj[key].toString().replace(/(^\s*)|(\s*$)/g, '') !== '') {
            _newPar[key] = obj[key];
        }
    }
    return _newPar;
}

filterParams({a:0, b:1, c:"010", d:null, e:undefined,f:false}) 
// 当值等于0,null,undefined的时候，就会被过滤
~~~

~~~
function getSuffix(file_name) {
    var result = /[^\.]+$/.exec(file_name);
    return result;
}

getSuffix('1234.png') // ["png", index: 5, input: "1234.png"]
getSuffix('1231344.file'); // ["file", index: 8, input: "1231344.file"]
~~~

~~~
function _getClass(o){
    return Object.prototype.toString.call(o).slice(8,-1);
}

_getClass(new Date()); // Date
_getClass('maolei');   // String
~~~

~~~
function bubbleSort(arr) {
    var len = arr.length;
    for (var i = 0; i < len; i++) {
        for (var j = 0; j < len - 1 - i; j++) {
            if (arr[j] > arr[j+1]) {        //相邻元素两两对比
                var temp = arr[j+1];        //元素交换
                arr[j+1] = arr[j];
                arr[j] = temp;
            }
        }
    }
    return arr;
}

var arr=[3,44,38,5,47,15,36,26,27,2,46,4,19,50,48];
bubbleSort(arr);//[2, 3, 4, 5, 15, 19, 26, 27, 36, 38, 44, 46, 47, 48, 50] ；
~~~
~~~
var render = function(tpl,data){
    return tpl.replace(/\{\{(.+?)\}\}/g,function(m,m1){
        return data[m1]
    })
}

render('我是{{name}}，年龄{{age}}，性别{{sex}}',{
    name:'姓名',
    age:18,sex:'女',
}) 
// "我是姓名，年龄18，性别女"
~~~
~~~
function maxArr(arr){
 return Math.max.apply(null,arr);
}
function minArr(arr){
 return Math.min.apply(null,arr);
}
​
maxArr([1,4,65,843,2,1,4]) // 843
minArr([1,4,65,843,2,10,4]) // 1
~~~
~~~
//求和
function sumArr(arr){
 var sumText=0;
 for(var i=0,len=arr.length;i<len;i++){
 sumText+=arr[i];
 }
 return sumText
}
// 平均值
​
function covArr(arr){
 var sumText=sumArr(arr);
 var covText=sumText/arr.length;
 return covText
}
​
sumArr([1,4,65,843,2,1,4]) // 920
covArr([1,4,65,843,2,1,4]) // 131.42857142857142
~~~
~~~
function randomOne(arr) {
 return arr[Math.floor(Math.random() * arr.length)];
}
​
randomOne([1,2,3,6,8,5,4,2,6]) // 1
~~~
~~~
function isHasElementOne(arr,value){ 
 for(var i = 0,vlen = arr.length; i < vlen; i++){ 
 if(arr[i] == value){ 
 return i; 
 } 
 } 
 return -1; 
}
isHasElementOne([1,2,3,4,5],3) // 2
~~~
~~~
function getEleCount (obj, ele) {
 var num = 0;
 for (var i = 0, len = obj.length; i < len; i++) {
 if (ele == obj[i]) {
 num++;
 }
 }
 return num;
}
​
getEleCount('asd56+asdasdwqe','a') // 3
getEleCount([1,2,3,4,5,66,77,22,55,22],22) // 2
~~~
~~~
function getArrayNum(arr,n1,n2){
 var arr1=[],len=n2||arr.length-1;
 for(var i=n1;i<=len;i++){
 arr1.push(arr[i])
 }
 return arr1;
}
​
getArrayNum([0,1,2,3,4,5,6,7,8,9],5,9) // [5, 6, 7, 8, 9]
~~~

~~~
/* arr:要进行操作的数组
 val:要删除的值
 type: 如果有值，则删除数组中所有含有val值的元素，如果没值或者不指定，则删除必须完全匹配val的值
*/
function removeArrayForValue(arr,val,type){
 return arr.filter(function (item) {
 return type? item.indexOf(val) === -1 : item !== val
 })
}
​
removeArrayForValue(['test','test1','test2','test','aaa'],'test','%')  // ["aaa"]
removeArrayForValue(['test','test1','test2','test','aaa'],'test') 
// ["test1", "test2", "aaa"]
~~~

~~~
//去除空格  type 1-所有空格  2-前后空格  3-前空格 4-后空格
function trim(str,type){
    switch (type){
        case 1:return str.replace(/\s+/g,"");
        case 2:return str.replace(/(^\s*)|(\s*$)/g, "");
        case 3:return str.replace(/(^\s*)/g, "");
        case 4:return str.replace(/(\s*$)/g, "");
        default:return str;
    }
}

trim('a   a   dd ',1); // "aadd"
trim('a   a   dd ',2); // "a   a   dd"
trim('a   a   dd ',3); // "a   a   dd "
trim(' a   a   dd ',4); // " a   a   dd"
~~~
~~~
// type 1:首字母大写 2：首页母小写 3：大小写转换 4：全部大写 5：全部小写
function changeCase(str,type)
{
    function ToggleCase(str) {
        var itemText = ""
        str.split("").forEach(
            function (item) {
                if (/^([a-z]+)/.test(item)) {
                    itemText += item.toUpperCase();
                }
                else if (/^([A-Z]+)/.test(item)) {
                    itemText += item.toLowerCase();
                }
                else{
                    itemText += item;
                }
            });
        return itemText;
    }

    switch (type) {
        case 1:
            return str.replace(/^(\w)(\w+)/, function (v, v1, v2) {
                return v1.toUpperCase() + v2.toLowerCase();
            });
        case 2:
            return str.replace(/^(\w)(\w+)/, function (v, v1, v2) {
                return v1.toLowerCase() + v2.toUpperCase();
            });
        case 3:
            return ToggleCase(str);
        case 4:
            return str.toUpperCase();
        case 5:
            return str.toLowerCase();
        default:
            return str;
    }
}

changeCase('aSSSaa', 1)  // "Asssaa"
changeCase('ASSSaa', 2)  // "aSSSAA"
changeCase('ASSSaa', 3)  // "asssAA"
changeCase('ASSSaa', 2)  // "ASSSAA"
changeCase('ASSSaa', 2)  // "asssaa"
~~~
~~~
function repeatStr(str, count) {
 var text = '';
 for (var i = 0; i < count; i++) {
 text += str;
 }
 return text;
}
repeatStr('123',4); // "123123123123"
~~~
~~~
//字符串替换(字符串,要替换的字符,替换成什么)
function replaceAll(str,AFindText,ARepText){
　　　raRegExp = new RegExp(AFindText,"g");
　　　return str.replace(raRegExp,ARepText);
}
replaceAll('maolei','ei','111') // "maol111"
replaceAll('maolei','li','111') // "maolei", 替换的"li"虽然在字符串里出现，但是不连续，返回原数组
~~~
~~~
function timestampToTime(timestamp) {
 var date = new Date(timestamp * 1000);//时间戳为10位需*1000，时间戳为13位的话不需乘1000
 Y = date.getFullYear() + '-';
 M = (date.getMonth()+1 < 10 ? '0'+(date.getMonth()+1) : date.getMonth()+1) + '-';
 D = date.getDate() + ' ';
 h = date.getHours() + ':';
 m = date.getMinutes() + ':';
 s = date.getSeconds();
 return Y+M+D+h+m+s;
}
​
timestampToTime(1403058804); //2014-06-18 10:33:24
~~~
~~~
function CutParagraph(name, size) {
 var newName;
 if (name.length > size) {
 newName = name.substring(0, size) + "...";
 return newName;
 } else {
 return name;
 }
}
CutParagraph('fujiawei',5) // "fujia..."
~~~
~~~
function randomNumber(count){
   return Math.random().toString(count).substring(2);
}

randomNumber(10) // "2584316588472575"

randomNumber(14) // "9b405070dd00122640c192caab84537"

Math.random().toString(36).substring(2); // "83vhdx10rmjkyb9"
~~~
~~~
function countStr (str,strSplit){
 return str.split(strSplit).length-1
}
var strTest='sad44654blog5a1sd67as9dablog4s5d16zxc4sdweasjkblogwqepaskdkblogahseiuadbhjcibloguyeajzxkcabloguyiwezxc967'
​
countStr(strTest,'blog') // 6
~~~
~~~
//此方法排序从小到大
//@arr ：应是数组类型

function insertionSort(arr) {
  //从第二个元素开始
  for (var i = i; i < arr.length; i++) {
    //取出待比较的元素
    var k = arr[i];
    //像前找，找到比当前元素大的位置
    var j;
    for (j = i - 1; j >= 0 && k < arr[j]; j--) {
      //向后移动一位
      arr[j + 1] = arr[j];
    }
    //插入元素
    arr[j + 1] = k;
  }
}
~~~
~~~
/**
 * 公有方法：获取前num天的日期
 * 
 * @param {Number} num 自动向上取整 
 * @param {boolean} order true是日期从大到小，false是从小到大 
 * @returns MM-dd
 */
function getTodayDate(num, order = false) {
  debugger
  num = Math.ceil(num)
  let arr_Date = []
  for (var i = 0; i < num; i++) {
    let date = new Date(new Date().getTime() - (i * 24 * 60 * 60 * 1000))
    let currMonth = new Date(date).getMonth() + 1
    let currDay = new Date(date).getDate()
    let result = `${currMonth.toString().length < 2 ? `0${currMonth}` : currMonth}-${currDay.toString().length < 2 ? `0${currDay}` : currDay}`;
    if (order) {
      arr_Date.push(result);
    } else {
      arr_Date.unshift(result);
    }
  }
  // console.log(arr_Date);
  return arr_Date;
}
console.log(getTodayDate(7));
~~~
~~~
(function (doc, win) {
  var docEl = doc.documentElement,
    resizeEvt = 'orientationchange' in window ? 'orientationchange' : 'resize',
    recalc = function () {
      var clientWidth = docEl.clientWidth;
      if (!clientWidth) return;
      if (clientWidth >= 1920) {
        docEl.style.fontSize = '100px';
      } else {
        docEl.style.fontSize = 100 * (clientWidth / 1920) + 'px';
      }
    };

  if (!doc.addEventListener) return;
  win.addEventListener(resizeEvt, recalc, false);
  doc.addEventListener('DOMContentLoaded', recalc, false);
})(document, window);
~~~
~~~
/**
 * 原生JS获取鼠标XY轴的值
 * 
 * @param {Object} evt 
 * @returns 
 */
function mousePosition(evt) {
  evt = evt || window.event;
  //Mozilla
  if (evt.pageX || evt.pageY) {
    return {
      x: evt.pageX,
      y: evt.pageY
    }
  }
  //IE
  return {
    x: evt.clientX + document.body.scrollLeft - document.body.clientLeft,
    y: evt.clientY + document.body.scrollTop - document.body.clientTop
  }
}

//获取X轴坐标
function getX(evt) {
  evt = evt || window.event;
  return mousePosition(evt).x;
}

//获取Y轴坐标
function getY(evt) {
  evt = evt || window.event;
  return mousePosition(evt).y;
}

//外部函数调用1
document.getElementById("x").onclick = function (evt) {
  alert(getX(evt))
}

//外部函数调用2
function showXY(evt) {
  evt = evt || window.event;
  document.getElementById("n").innerHTML = "" + getX(evt);
}
window.onload = function () {
  document.body.onmousemove = showXY;
}
~~~

~~~
/**
  * 转成XML对象
  * 
  * @param {String} str 一个xml格式的串
  * @returns 
  */
function createXml(str) {
  if (document.all) {
    var xmlDom = new ActiveXObject("Microsoft.XMLDOM")
    xmlDom.loadXML(str)
    return xmlDom
  }
  else
    return new DOMParser().parseFromString(str, "text/xml")
}
~~~
~~~
//            二代身份证号码为 18 位，其最后一位(第 18 位)的计算方法为:
//           1、 将前面的身份证号码 17 位数分别乘以不同的系数。从第一位到第十七位的系数分别 为:7-9-10-5-8-4-2-1-6-3-7-9-10-5-8-4-2
//            2、 将这 17 位数字和系数相乘的结果相加
//           3、 用加出来和除以 11，看余数是多少?
//            4、 余数只可能有 0-1-2-3-4-5-6-7-8-9-10 这 11 个数字。
//               每个数字所对应的 最后一位身份证的号码为:1-0-X-9-8-7-6-5-4-3-2
//               即，如果余数是是 2，就会在身份证的第 18 位数字上出现罗马数字的X。如果余数是 10，身份证的最后一位号码就 是 2
//        身份验证函数
function Authentication() {
  const arrXishu = [7, 9, 10, 5, 8, 4, 2, 1, 6, 3, 7, 9, 10, 5, 8, 4, 2]; //声明系数数组
  var arrch = ['1', '0', 'X', '9', '8', '7', '6', '5', '4', '3', '2']; //声明最后一位身份证号码的数组
  var idcard = document.getElementById("IdCard").value;
  var arrIdcard = idcard.split(""); //字符串转化为数组
  var sum = 0;
  if (arrIdcard.length != 18) {
    return alert("输入的号码有误");
  } else {
    for (var index = 0; index < arrXishu.length; index++) {
      sum += parseInt(arrXishu[index]) * arrXishu[index];
    }
    let c = sum % 11;
    let code = arrch(c);
    if (code == arrIdcard.charAt(17)) {
      alert("身份证号码正确");
    } else {
      alert("身份证号码错误");
    }
  }
}
~~~
~~~
/**
 * 格式化数字串
 * @param {String} str 源字符串
 * @param {Number} size 每隔几个字符进行分割 默认3
 * @param {String} delimiter delimiter-分割符 默认','
 */
function formatText(str, size = 3, delimiter = ',') {
    let _str = str.toString(),
        regText = '\\d{1,' + size + '}(?=(\\d{' + size + '})+$)',
        reg = new RegExp(regText, 'g');

    return _str.replace(/^(-?)(\d+)((\.\d+)?)$/,
        function ($0, $1, $2, $3) {
            return $1 + $2.replace(reg, `$&${delimiter}`) + $3;
        })
}
~~~
~~~
function jsAjax(args) {
  var self = this;
  this.options = {
    type: 'GET',
    async: true,
    contentType: 'application/x-www-form-urlencoded',
    url: 'about:blank',
    data: null,
    success: {},
    error: {}
  };
  this.getXmlHttp = function () {
    var xmlHttp;
    try {
      xmlhttp = new XMLHttpRequest();
    } catch (e) {
      try {
        xmlhttp = new ActiveXObject("Msxml2.XMLHTTP");
      } catch (e) {
        xmlHttp = new ActiveXObject("Microsoft.XMLHTTP");
      }
    }
    if (!xmlhttp) {
      alert('您的浏览器不支持AJAX');
      return false;
    }
    return xmlhttp;
  };
  this.send = function () {
    C.each(self.options, function (key, val) {
      self.options[key] = (args[key] == null) ? val : args[key];
    });

    var xmlHttp = new self.getXmlHttp();
    if (self.options.type.toUpperCase() == 'GET') {
      xmlHttp.open(self.options.type, self.options.url + (self.options.data == null ? "" : ((/[?]$/.test(self.options.url) ? '&' : '?') + self.options.data)), self.options.async);
    } else {
      xmlHttp.open(self.options.type, self.options.url, self.options.async);
      xmlHttp.setRequestHeader('Content-Length', self.options.data.length);
    }
    xmlHttp.setRequestHeader('Content-Type', self.options.contentType);
    xmlHttp.onreadystatechange = function () {
      if (xmlHttp.readyState == 4) {
        if (xmlHttp.status == 200 || xmlHttp.status == 0) {
          if (typeof self.options.success == 'function') self.options.success(xmlHttp.responseText);
          xmlHttp = null;
        } else {
          if (typeof self.options.error == 'function') self.options.error('Server Status: ' + xmlHttp.status);
        }
      }
    };
    xmlHttp.send(self.options.type.toUpperCase() == 'POST' ? self.options.data.toString() : null);
  };
  this.send();
};
~~~
一个非常基本的程序，没什么看头，基本就是一大堆定理算出来，写的在里是发现CSS3出来后，算角度的需求越来越多，每次算还要用到笔纸，与是乎总结下来搞这样一个小工具，由于需求一般都是直角的，所以这里只算直角，根据两边长度求角度。

函数中的sins是拷贝的一份正弦表，我把它倒了方向写成了一个对象，没什么看头，可以看源码（一个很长的json）,这里的思路是取这个正弦值最附近的一位在sins中有key的，就返回它的角度。
~~~
 var sins={
0017:0.1,0035:0.2,0052:0.3,0070:0.4,0087:0.5,0105:0.6,0122:0.7,0140:0.8,0157:0.9,0175:1.0,0192:1.1,0209:1.2,0227:1.3,0244:1.4,0262:1.5,0279:1.6,0297:1.7,0314:1.8,0332:1.9,0349:2.0,0366:2.1,0384:2.2,0401:2.3,0419:2.4,0436:2.5,0454:2.6,0471:2.7,0488:2.8,0506:2.9,0523:3.0,0541:3.1,0558:3.2,0576:3.3,0593:3.4,0610:3.5,0628:3.6,0645:3.7,0663:3.8,0680:3.9,0698:4.0,0715:4.1,0732:4.2,0750:4.3,0767:4.4,0785:4.5,0802:4.6,0819:4.7,0837:4.8,0854:4.9,0872:5.0,0889:5.1,0906:5.2,0924:5.3,0941:5.4,0958:5.5,0976:5.6,0993:5.7,1011:5.8,1028:5.9,1045:6.0,1063:6.1,1080:6.2,1097:6.3,1115:6.4,1132:6.5,1149:6.6,1167:6.7,1184:6.8,1201:6.9,1219:7.0,1236:7.1,1253:7.2,1271:7.3,1288:7.4,1305:7.5,1323:7.6,1340:7.7,1357:7.8,1374:7.9,1392:8.0,1409:8.1,1426:8.2,1444:8.3,1461:8.4,1478:8.5,1495:8.6,1513:8.7,1530:8.8,1547:8.9,1564:9.0,1582:9.1,1599:9.2,1616:9.3,1633:9.4,1650:9.5,1668:9.6,1685:9.7,1702:9.8,1719:9.9,1736:10.0,1754:10.1,1771:10.2,1788:10.3,1805:10.4,1822:10.5,1840:10.6,1857:10.7,1874:10.8,1891:10.9,1908:11.0,1925:11.1,1942:11.2,1959:11.3,1977:11.4,1994:11.5,2011:11.6,2028:11.7,2045:11.8,2062:11.9,2079:12.0,2096:12.1,2113:12.2,2130:12.3,2147:12.4,2164:12.5,2181:12.6,2198:12.7,2215:12.8,2233:12.9,2250:13.0,2267:13.1,2284:13.2,2300:13.3,2317:13.4,2334:13.5,2351:13.6,2368:13.7,2385:13.8,2402:13.9,2419:14.0,2436:14.1,2453:14.2,2470:14.3,2487:14.4,2504:14.5,2521:14.6,2538:14.7,2554:14.8,2571:14.9,2588:15.0,2605:15.1,2622:15.2,2639:15.3,2656:15.4,2672:15.5,2689:15.6,2706:15.7,2723:15.8,2740:15.9,2756:16.0,2773:16.1,2790:16.2,2807:16.3,2823:16.4,2840:16.5,2857:16.6,2874:16.7,2890:16.8,2907:16.9,2924:17.0,2940:17.1,2957:17.2,2974:17.3,2990:17.4,3007:17.5,3024:17.6,3040:17.7,3057:17.8,3074:17.9,3090:18.0,3107:18.1,3123:18.2,3140:18.3,3156:18.4,3173:18.5,3190:18.6,3206:18.7,3223:18.8,3239:18.9,3256:19.0,3272:19.1,3289:19.2,3305:19.3,3322:19.4,3338:19.5,3355:19.6,3371:19.7,3387:19.8,3404:19.9,3420:20.0,3437:20.1,3453:20.2,3469:20.3,3486:20.4,3502:20.5,3518:20.6,3535:20.7,3551:20.8,3567:20.9,3584:21.0,3600:21.1,3616:21.2,3633:21.3,3649:21.4,3665:21.5,3681:21.6,3697:21.7,3714:21.8,3730:21.9,3746:22.0,3762:22.1,3778:22.2,3795:22.3,3811:22.4,3827:22.5,3843:22.6,3859:22.7,3875:22.8,3891:22.9,3907:23.0,3923:23.1,3939:23.2,3955:23.3,3971:23.4,3987:23.5,4003:23.6,4019:23.7,4035:23.8,4051:23.9,4067:24.0,4083:24.1,4099:24.2,4115:24.3,4131:24.4,4147:24.5,4163:24.6,4179:24.7,4195:24.8,4210:24.9,4226:25.0,4242:25.1,4258:25.2,4274:25.3,4289:25.4,4305:25.5,4321:25.6,4337:25.7,4352:25.8,4368:25.9,4384:26.0,4399:26.1,4415:26.2,4431:26.3,4446:26.4,4462:26.5,4478:26.6,4493:26.7,4509:26.8,4524:26.9,4540:27.0,4555:27.1,4571:27.2,4586:27.3,4602:27.4,4617:27.5,4633:27.6,4648:27.7,4664:27.8,4679:27.9,4695:28.0,4710:28.1,4726:28.2,4741:28.3,4756:28.4,4772:28.5,4787:28.6,4802:28.7,4818:28.8,4833:28.9,4848:29.0,4863:29.1,4879:29.2,4894:29.3,4909:29.4,4924:29.5,4939:29.6,4955:29.7,4970:29.8,4985:29.9,5000:30.0,5015:30.1,5030:30.2,5045:30.3,5060:30.4,5075:30.5,5090:30.6,5105:30.7,5120:30.8,5135:30.9,5150:31.0,5165:31.1,5180:31.2,5195:31.3,5210:31.4,5225:31.5,5240:31.6,5255:31.7,5270:31.8,5284:31.9,5299:32.0,5314:32.1,5329:32.2,5344:32.3,5358:32.4,5373:32.5,5388:32.6,5402:32.7,5417:32.8,5432:32.9,5446:33.0,5461:33.1,5476:33.2,5490:33.3,5505:33.4,5519:33.5,5534:33.6,5548:33.7,5563:33.8,5577:33.9,5592:34.0,5606:34.1,5621:34.2,5635:34.3,5650:34.4,5664:34.5,5678:34.6,5693:34.7,5707:34.8,5721:34.9,5736:35.0,5750:35.1,5764:35.2,5779:35.3,5793:35.4,5807:35.5,5821:35.6,5835:35.7,5850:35.8,5864:35.9,5878:36.0,5892:36.1,5906:36.2,5920:36.3,5934:36.4,5948:36.5,5962:36.6,5976:36.7,5990:36.8,6004:36.9,6018:37.0,6032:37.1,6046:37.2,6060:37.3,6074:37.4,6088:37.5,6101:37.6,6115:37.7,6129:37.8,6143:37.9,6157:38.0,6170:38.1,6184:38.2,6198:38.3,6211:38.4,6225:38.5,6239:38.6,6252:38.7,6266:38.8,6280:38.9,6293:39.0,6307:39.1,6320:39.2,6334:39.3,6347:39.4,6361:39.5,6374:39.6,6388:39.7,6401:39.8,6414:39.9,6428:40.0,6441:40.1,6455:40.2,6468:40.3,6481:40.4,6494:40.5,6508:40.6,6521:40.7,6534:40.8,6547:40.9,6561:41.0,6574:41.1,6587:41.2,6600:41.3,6613:41.4,6626:41.5,6639:41.6,6652:41.7,6665:41.8,6678:41.9,6691:42.0,6704:42.1,6717:42.2,6730:42.3,6743:42.4,6756:42.5,6769:42.6,6782:42.7,6794:42.8,6807:42.9,6820:43.0,6833:43.1,6845:43.2,6858:43.3,6871:43.4,6884:43.5,6896:43.6,6909:43.7,6921:43.8,6934:43.9,6947:44.0,6959:44.1,6972:44.2,6984:44.3,6997:44.4,7009:44.5,7022:44.6,7034:44.7,7046:44.8,7059:44.9,7071:45.0,7083:45.1,7096:45.2,7108:45.3,7120:45.4,7133:45.5,7145:45.6,7157:45.7,7169:45.8,7181:45.9,7193:46.0,7206:46.1,7218:46.2,7230:46.3,7242:46.4,7254:46.5,7266:46.6,7278:46.7,7290:46.8,7302:46.9,7314:47.0,7325:47.1,7337:47.2,7349:47.3,7361:47.4,7373:47.5,7385:47.6,7396:47.7,7408:47.8,7420:47.9,7431:48.0,7443:48.1,7455:48.2,7466:48.3,7478:48.4,7490:48.5,7501:48.6,7513:48.7,7524:48.8,7536:48.9,7547:49.0,7559:49.1,7570:49.2,7581:49.3,7593:49.4,7604:49.5,7615:49.6,7627:49.7,7638:49.8,7649:49.9,7660:50.0,7672:50.1,7683:50.2,7694:50.3,7705:50.4,7716:50.5,7727:50.6,7738:50.7,7749:50.8,7760:50.9,7771:51.0,7782:51.1,7793:51.2,7804:51.3,7815:51.4,7826:51.5,7837:51.6,7848:51.7,7859:51.8,7869:51.9,7880:52.0,7891:52.1,7902:52.2,7912:52.3,7923:52.4,7934:52.5,7944:52.6,7955:52.7,7965:52.8,7976:52.9,7986:53.0,7997:53.1,8007:53.2,8018:53.3,8028:53.4,8039:53.5,8049:53.6,8059:53.7,8070:53.8,8080:53.9,8090:54.0,8100:54.1,8111:54.2,8121:54.3,8131:54.4,8141:54.5,8151:54.6,8161:54.7,8171:54.8,8181:54.9,8192:55.0,8202:55.1,8211:55.2,8221:55.3,8231:55.4,8241:55.5,8251:55.6,8261:55.7,8271:55.8,8281:55.9,8290:56.0,8300:56.1,8310:56.2,8320:56.3,8329:56.4,8339:56.5,8348:56.6,8358:56.7,8368:56.8,8377:56.9,8387:57.0,8396:57.1,8406:57.2,8415:57.3,8425:57.4,8434:57.5,8443:57.6,8453:57.7,8462:57.8,8471:57.9,8480:58.0,8490:58.1,8499:58.2,8508:58.3,8517:58.4,8526:58.5,8536:58.6,8545:58.7,8554:58.8,8563:58.9,8572:59.0,8581:59.1,8590:59.2,8599:59.3,8607:59.4,8616:59.5,8625:59.6,8634:59.7,8643:59.8,8652:59.9,8660:60.0,8669:60.1,8678:60.2,8686:60.3,8695:60.4,8704:60.5,8712:60.6,8721:60.7,8729:60.8,8738:60.9,8746:61.0,8755:61.1,8763:61.2,8771:61.3,8780:61.4,8788:61.5,8796:61.6,8805:61.7,8813:61.8,8821:61.9,8829:62.0,8838:62.1,8846:62.2,8854:62.3,8862:62.4,8870:62.5,8878:62.6,8886:62.7,8894:62.8,8902:62.9,8910:63.0,8918:63.1,8926:63.2,8934:63.3,8942:63.4,8949:63.5,8957:63.6,8965:63.7,8973:63.8,8980:63.9,8988:64.0,8996:64.1,9003:64.2,9011:64.3,9018:64.4,9026:64.5,9033:64.6,9041:64.7,9048:64.8,9056:64.9,9063:65.0,9070:65.1,9078:65.2,9085:65.3,9092:65.4,9100:65.5,9107:65.6,9114:65.7,9121:65.8,9128:65.9,9135:66.0,9143:66.1,9150:66.2,9157:66.3,9164:66.4,9171:66.5,9178:66.6,9184:66.7,9191:66.8,9198:66.9,9205:67.0,9212:67.1,9219:67.2,9225:67.3,9232:67.4,9239:67.5,9245:67.6,9252:67.7,9259:67.8,9265:67.9,9272:68.0,9278:68.1,9285:68.2,9291:68.3,9298:68.4,9304:68.5,9311:68.6,9317:68.7,9323:68.8,9330:68.9,9336:69.0,9342:69.1,9348:69.2,9354:69.3,9361:69.4,9367:69.5,9373:69.6,9379:69.7,9385:69.8,9391:69.9,9397:70.0,9403:70.1,9409:70.2,9415:70.3,9421:70.4,9426:70.5,9432:70.6,9438:70.7,9444:70.8,9449:70.9,9455:71.0,9461:71.1,9466:71.2,9472:71.3,9478:71.4,9483:71.5,9489:71.6,9494:71.7,9500:71.8,9505:71.9,9511:72.0,9516:72.1,9521:72.2,9527:72.3,9532:72.4,9537:72.5,9542:72.6,9548:72.7,9553:72.8,9558:72.9,9563:73.0,9568:73.1,9573:73.2,9578:73.3,9583:73.4,9588:73.5,9593:73.6,9598:73.7,9603:73.8,9608:73.9,9613:74.0,9617:74.1,9622:74.2,9627:74.3,9632:74.4,9636:74.5,9641:74.6,9646:74.7,9650:74.8,9655:74.9,9659:75.0,9664:75.1,9668:75.2,9673:75.3,9677:75.4,9681:75.5,9686:75.6,9690:75.7,9694:75.8,9699:75.9,9703:76.0,9707:76.1,9711:76.2,9715:76.3,9720:76.4,9724:76.5,9728:76.6,9732:76.7,9736:76.8,9740:76.9,9744:77.0,9748:77.1,9751:77.2,9755:77.3,9759:77.4,9763:77.5,9767:77.6,9770:77.7,9774:77.8,9778:77.9,9781:78.0,9785:78.1,9789:78.2,9792:78.3,9796:78.4,9799:78.5,9803:78.6,9806:78.7,9810:78.8,9813:78.9,9816:79.0,9820:79.1,9823:79.2,9826:79.3,9829:79.4,9833:79.5,9836:79.6,9839:79.7,9842:79.8,9845:79.9,9848:80.0,9851:80.1,9854:80.2,9857:80.3,9860:80.4,9863:80.5,9866:80.6,9869:80.7,9871:80.8,9874:80.9,9877:81.0,9880:81.1,9882:81.2,9885:81.3,9888:81.4,9890:81.5,9893:81.6,9895:81.7,9898:81.8,9900:81.9,9903:82.0,9905:82.1,9907:82.2,9910:82.3,9912:82.4,9914:82.5,9917:82.6,9919:82.7,9921:82.8,9923:82.9,9925:83.0,9928:83.1,9930:83.2,9932:83.3,9934:83.4,9936:83.5,9938:83.6,9940:83.7,9942:83.8,9943:83.9,9945:84.0,9947:84.1,9949:84.2,9951:84.3,9952:84.4,9954:84.5,9956:84.6,9957:84.7,9959:84.8,9960:84.9,9962:85.0,9963:85.1,9965:85.2,9966:85.3,9968:85.4,9969:85.5,9971:85.6,9972:85.7,9973:85.8,9974:85.9,9976:86.0,9977:86.1,9978:86.2,9979:86.3,9980:86.4,9981:86.5,9982:86.6,9983:86.7,9984:86.8,9985:86.9,9986:87.0,9987:87.1,9988:87.2,9989:87.3,9990:87.4,9990:87.5,9991:87.6,9992:87.7,9993:87.8,9994:88.0,9995:88.1,9996:88.3,9997:88.5,9998:88.8,9999:89.1
};
    function toMath(x,y){
        var z=Math.sqrt(x*x+y*y);
        var skey=Math.floor(x/z*10000);
        if(!sins.hasOwnProperty(skey)){
        for(var i=1;i<=100;i++){
            var akey = skey - i;
            if(sins.hasOwnProperty(akey)){
            skey = akey;
            break;
            }
            var bkey = skey + i;
            if(sins.hasOwnProperty(bkey)){
            skey = bkey;
            break;
            }
        }
        }
        return {'x':x,'y':y,'z':z,'a':sins[skey],'b':90-sins[skey]};
    }
    console.log(toMath(50,50))
~~~
```
$(document).keydown(function(e){ 
    var keyEvent;
    if(e.keyCode==8){ 
        var d=e.srcElement||e.target; 
        if(d.tagName.toUpperCase()=='INPUT'||d.tagName.toUpperCase()=='TEXTAREA'){ 
            keyEvent=d.readOnly||d.disabled; 
        }else{ 
            keyEvent=true; 
        } 
    }else{ 
        keyEvent=false; 
    } 
    if(keyEvent){ 
        e.preventDefault(); 
    } 
});
```

```
function generateRandomAlphaNum(len) {
    var rdmString = "";
    for( ; rdmString.length < len; rdmString  += Math.random().toString(36).substr(2));
    return  rdmString.substr(0, len);
}
//调用
generateRandomAlphaNum(10);//fa8y393e9a
generateRandomAlphaNum(10);//j15mhox8bs
```

```
//float偏移处理 eg.  1.67*100结果会偏移，使用mul(1.67*100)
mul(a, b) {
    let c = 0,
        d = a.toString().replace(',',''),
        e = b.toString();
    try {
        c += d.split(".")[1].length;
    } catch (f) {}
    try {
        c += e.split(".")[1].length;
    } catch (f) {}
    return Number(d.replace(".", "")) * Number(e.replace(".", "")) / Math.pow(10, c);
  }
}
```
```
//根据月份获取起止时间戳
  getTimeFromMonth(year, month){
      return [
          new Date(year, month - 1, 1).getTime()/1000,
          new Date(year, month, 0).getTime()/1000
      ]
  }
```
```
const Utils = {
  _typeof (obj) {
    return Object.prototype.toString.call(obj).slice(8, -1).toLowerCase();
  },
  isString (o) { //是否字符串
    return Utils._typeof(obj) === 'string'
  },
  isNumber (o) { //是否数字
      return Utils._typeof(obj) === 'number'
  },
  isBoolean (o) { //是否boolean
      return Utils._typeof(obj) === 'boolean'
  },
  isFunction (o) { //是否函数
      return Utils._typeof(obj) === 'function'
  },
  isNull (o) { //是否为null
      return Utils._typeof(obj) === 'null'
  },
  isUndefined (o) { //是否undefined
      return Utils._typeof(obj) === 'undefined'
  },
  isArray (o) { //是否数组
      return Utils._typeof(obj) === 'array'
  },
  isDate (o) { //是否时间
      return Utils._typeof(obj) === 'date'
  },
  /*是否是纯粹的对象*/
  isPlainObject (obj) {
    return Utils._typeof(obj) === 'object';
  },
  isString (obj) {
    return typeof (obj) === 'string';
  },
  /*是否是空数组*/
  isNonEmptyArray (obj = []) {
    return obj && obj.length > 0 && Array.isArray(obj) && typeof obj !== 'undefined';
  },
  /*是否是对象*/
  isObject (item) {
    return (item && typeof item === 'object' && !Array.isArray(item));
  },
  /*是否是空对象*/
  isEmptyObject (obj) {
    return Object.keys(obj).length === 0 && obj.constructor === Object;
  },
  //对象是否包含某属性
  isIncludeAttr(obj, attr) {
    //判断是否有该键值
    if (obj && obj.hasOwnProperty(attr)) {
      //如果有返回true
      return true;
    } 
      return false;
    
  },
  decodeIconFont (text) {
    // 正则匹配 图标和文字混排 eg: 我去上学校&#xe600;,天天不&#xe600;迟到
    const regExp = /&#x[a-z|0-9]{4,5};?/g;
    if (regExp.test(text)) {
      return text.replace(new RegExp(regExp, 'g'), function (iconText) {
        const replace = iconText.replace(/&#x/, '0x').replace(/;$/, '');
        return String.fromCharCode(replace);
      });
    } else {
      return text;
    }
  },
  /*深拷贝*/
  mergeDeep (target) {
    let tempObj = Array.isArray(target)?[]:{};
    for(let key in target){
      tempObj[key] = Utils.isObject(target[key])?Util.mergeDeep(target[key]):target[key];
    }
    return tempObj;
  },
 
  /**
   * 分割数组
   * @param arr 被分割数组
   * @param size 分割数组的长度
   * @returns {Array}
   */
  arrayChunk (arr = [], size = 4) {
    let groups = [];
    if (arr && arr.length > 0) {
      groups = arr.map((e, i) => {
        return i % size === 0 ? arr.slice(i, i + size) : null;
      }).filter(e => {
        return e;
      });
    }
    return groups;
  },
  /*
   * 截断字符串
   * @param str 传入字符串
   * @param len 截断长度
   * @param hasDot 末尾是否...
   * @returns {String}
   */
  truncateString (str, len, hasDot = true) {
    let newLength = 0;
    let newStr = '';
    let singleChar = '';
    const chineseRegex = /[^\x00-\xff]/g;
    const strLength = str.replace(chineseRegex, '*').length;
    for (let i = 0; i < strLength; i++) {
      singleChar = str.charAt(i).toString();
      if (singleChar.match(chineseRegex) !== null) {
        newLength += 2;
      } else {
        newLength++;
      }
      if (newLength > len) {
        break;
      }
      newStr += singleChar;
    }

    if (hasDot && strLength > len) {
      newStr += '...';
    }
    return newStr;
  },
  /*
   * 转换 obj 为 url params参数
   * @param obj 传入对象
   * @param isEncodeURIComponent 是否编码，默认不编码
   * @returns {String}
   * eg. objToParams({name:'大佬',age:18})
   */
  objToParams (obj,isEncodeURIComponent=false) {
    let str = "";
    for (let key in obj) {
      if (str !== "") {
        str += "&";
      }
      str += key + "=" + (isEncodeURIComponent?encodeURIComponent(obj[key]):obj[key]);
    }
    return str;
  },
  /*
   * 转换 url params参数为obj
   * @param str 传入url参数字符串
   * @param isDecodeURI 是否解码，默认不解码
   * @returns {Object}
   * eg. paramsToObj('http://www.cctv.com?name=大佬&age=18')
   */
  paramsToObj (str,isDecodeURI=false) {
    let obj = {};
    str = str.substring(str.indexOf('?')+1);
    try {
      obj = JSON.parse('{"' + (isDecodeURI?decodeURI(str):str).replace(/"/g, '\\"').replace(/&/g, '","').replace(/=/g, '":"') + '"}')
    } catch (e) {
      console.log(e);
    }
    return obj;
  },
  /*
   *保留n位小数
   *@param num {Number|String} 原数字 1.33或者'1.33'
   *@returns {String} 返回字符串
   */
  toThousands(num,n) {
    return parseFloat(num).toFixed(n).replace(/(\d{1,3})(?=(\d{3})+(?:\.))/g, "$1,");
  },
  /*
   *生成两位整数之间的随机整数(包括两端的整数 )
   *
   **/
  randomA(min, max) {
    return Math.floor(Math.random() * (max - min + 1)) + min;
  },
  /*
   *生成两位整数之间的随机整数(不包括两端的整数)
   *
   **/
  randomB(min, max) {
    min+=1,max-=1;
    return Math.floor(Math.random() * (max - min + 1)) + min;
  },

  /*时间格式化*/
  formatTime(obj, format) {
    if(format){
      var date;
      if (obj instanceof Date) {
        date = obj;
      } else {
        date = new Date(obj);
      }
      var dayNames = ['星期一', '星期二', '星期三', '星期四', '星期五', '星期六', '星期日',]

      var o = {
        'M+': date.getMonth() < 9 ? "0" + (date.getMonth() + 1) : (date.getMonth() + 1), // 月份
        'd+': date.getDate() < 10 ? "0" + date.getDate() : date.getDate(), // 日
        'h+': date.getHours(), // 小时
        'm+': date.getMinutes(), // 分
        's+': date.getSeconds() < 10 ? "0" + date.getSeconds() : date.getSeconds(), // 秒
        'q+': Math.floor((date.getMonth() + 3) / 3), // 季度
        'S+': date.getMilliseconds(), // 毫秒
        'D+': dayNames[date.getDay()], //星期
      };

      if (/(y+)/.test(format)) format = format.replace(RegExp.$1, (`${date.getFullYear()}`).substr(4 - RegExp.$1.length));
      for (var k in o) {
        if (new RegExp(`(${k})`).test(format)) {
          format = format.replace(RegExp.$1, (RegExp.$1.length === 1) ? (o[k]) : ((`00${o[k]}`).substr((`${o[k]}`).length)));
        }
      }
      return format;
    }else{
      let date = new Date(obj)
      let _year = date.getFullYear(),
        _month = (date.getMonth()+1) > 9 ? (date.getMonth()+1) : '0' + (date.getMonth()+1),
        _date = date.getDate(),
        _hour = date.getHours(),
        _minute = date.getMinutes(),
        _second = date.getSeconds()
      return _year + '-' + _month + '-' + _date + ' ' + _hour + ':' + _minute + ':' + _second
    }
  },
  /*去掉首尾空格*/
  trimStr(str) {
    return str.replace(/(^\s*)|(\s*$)/g,"");
  },
  /*正则匹配*/
  checkStr (str, type) {
    switch (type) {
        case 'phone':   //手机号码
            return /^1[3|4|5|6|7|8|9][0-9]{9}$/.test(str);
        case 'tel':     //座机
            return /^(0\d{2,3}-\d{7,8})(-\d{1,4})?$/.test(str);
        case 'card':    //身份证
            return /(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/.test(str);
        case 'pwd':     //密码以字母开头，长度在6~18之间，只能包含字母、数字和下划线
            return /^[a-zA-Z]\w{5,17}$/.test(str)
        case 'postal':  //邮政编码
            return /[1-9]\d{5}(?!\d)/.test(str);
        case 'QQ':      //QQ号
            return /^[1-9][0-9]{4,9}$/.test(str);
        case 'email':   //邮箱
            return /^[\w-]+(\.[\w-]+)*@[\w-]+(\.[\w-]+)+$/.test(str);
        case 'money':   //金额(小数点2位)
            return /^\d*(?:\.\d{0,2})?$/.test(str);
        case 'URL':     //网址
            return /(http|ftp|https):\/\/[\w\-_]+(\.[\w\-_]+)+([\w\-\.,@?^=%&:/~\+#]*[\w\-\@?^=%&/~\+#])?/.test(str)
        case 'IP':      //IP
            return /((?:(?:25[0-5]|2[0-4]\\d|[01]?\\d?\\d)\\.){3}(?:25[0-5]|2[0-4]\\d|[01]?\\d?\\d))/.test(str);
        case 'date':    //日期时间
            return /^(\d{4})\-(\d{2})\-(\d{2}) (\d{2})(?:\:\d{2}|:(\d{2}):(\d{2}))$/.test(str) || /^(\d{4})\-(\d{2})\-(\d{2})$/.test(str)
        case 'number':  //数字
            return /^[0-9]$/.test(str);
        case 'positiveInteger':  //正整数
            return /^[1-9]\d*$/.test(str);
        case 'price':  //价格
            return /(^[1-9]\d*(\.\d{1,2})?$)|(^0(\.\d{1,2})?$)/.test(str);//价格非0则去掉'?'
        case 'english': //英文
            return /^[a-zA-Z]+$/.test(str);
        case 'chinese': //中文
            return /^[\u4E00-\u9FA5]+$/.test(str);
        case 'lower':   //小写
            return /^[a-z]+$/.test(str);
        case 'upper':   //大写
            return /^[A-Z]+$/.test(str);
        case 'HTML':    //HTML标记
            return /<("[^"]*"|'[^']*'|[^'">])*>/.test(str);
        default:
            return true;
    }
  },
  /**
   * @param  {s} 秒数
   * @return {String} 字符串
   *
   * @example formatHMS(3610) // -> 1h0m10s
   */
  formatHMS (s) {
      var str = ''
      if (s > 3600) {
          str = Math.floor(s/3600)+'h'+Math.floor(s%3600/60)+'m'+s%60+'s'
      }else if(s > 60) {
          str = Math.floor(s/60)+'m'+s%60+'s'
      }else{
          str = s%60+'s'
      }
      return str
  },
  //根据月份获取起止时间戳
  getTimeFromMonth(year, month){
      return [
          new Date(year, month - 1, 1).getTime()/1000,
          new Date(year, month, 0).getTime()/1000
      ]
  },
//根据日期获取一天起止时间戳
   getTimeFromDay(year, month,day){
         return [
               new Date(year, month-1 , day).getTime()/1000,
               new Date(year, month-1, (day+1)).getTime()/1000
          ]
  },
  /*数组删除指定元素*/
  remove (arr, ele) {
      var index = arr.indexOf(ele);
      if(index > -1) {
          arr.splice(index, 1);
      }
      return arr;
  },
  // 数组求并集
  union (a,b) {
    return [...new Set([...a, ...b])];
  },
  // 数组求交集
  intersect (a,b) {
    return [...new Set([...a].filter(x => b.includes(x)))];
  },
  //数组求差集
  difference (a,b) {
    return [...new Set([...a].filter(x => !b.includes(x)))];
  },
  //数组内部交换
  internalExchange (n,m,arr) {
    [arr[n],arr[m]] = [arr[m],arr[n]];
  } ,
  //数组去重
  Deduplication (arr) {
    return [...new Set([...arr])]
  },
  /*数组最大值*/
  max (arr) {
      return Math.max.apply(null, arr);
  },
  /*数组最小值*/
  min (arr) {
      return Math.min.apply(null, arr);
  },
  //字符串首字母变大写
  changeIndexToUpperCase(str){
    return str.replace(/\b\w+\b/g, function (word) {
        return word.substring(0, 1).toUpperCase() + word.substring(1).toLowerCase();
    });
  },
//float偏移处理 eg.  1.67*100结果会偏移，使用mul(1.67*100)
mul(a, b) {
    let c = 0,
        d = a.toString().replace(',',''),
        e = b.toString();
    try {
        c += d.split(".")[1].length;
    } catch (f) {}
    try {
        c += e.split(".")[1].length;
    } catch (f) {}
    return Number(d.replace(".", "")) * Number(e.replace(".", "")) / Math.pow(10, c);
  }
}
```
例子
调用方法
```
Utils .mul(a,b);
Utils .changeIndexToUpperCase(str)
```
 压缩
```
function Compress(strNormalString) {
    alert("压缩前长度：" + strNormalString.length);
    var strCompressedString = "";

    var ht = new Array();
    for(i = 0; i < 128; i++) {
        ht[i] = i;
    }

    var used = 128;
    var intLeftOver = 0;
    var intOutputCode = 0;
    var pcode = 0;
    var ccode = 0;
    var k = 0;

    for(var i=0; i<strNormalString.length; i++) {
        ccode = strNormalString.charCodeAt(i);
        k = (pcode << 8) | ccode;
        if(ht[k] != null) {
            pcode = ht[k];
        } else {
            intLeftOver += 12;
            intOutputCode <<= 12;
            intOutputCode |= pcode;
            pcode = ccode;
            if(intLeftOver >= 16) {
                strCompressedString += String.fromCharCode( intOutputCode >> ( intLeftOver - 16 ) );
                intOutputCode &= (Math.pow(2, (intLeftOver - 16)) - 1);
                intLeftOver -= 16;
            }
            if(used < 4096) {
                used ++;
                ht[k] = used - 1;
            }
        }
    }

    if(pcode != 0) {
        intLeftOver += 12;
        intOutputCode <<= 12;
        intOutputCode |= pcode;
    }

    if(intLeftOver >= 16) {
        strCompressedString += String.fromCharCode( intOutputCode >> ( intLeftOver - 16 ) );
        intOutputCode &= (Math.pow(2,(intLeftOver - 16)) - 1);
        intLeftOver -= 16;
    }

    if( intLeftOver > 0) {
        intOutputCode <<= (16 - intLeftOver);
        strCompressedString += String.fromCharCode( intOutputCode );
    }

    alert("压缩后长度：" + strCompressedString.length);
    return strCompressedString;
}
```

解压缩
```
function Decompress(strCompressedString) {
    var strNormalString = "";
    var ht = new Array();

    for(i = 0; i < 128; i++) {
        ht[i] = String.fromCharCode(i);
    }

    var used = 128;
    var intLeftOver = 0;
    var intOutputCode = 0;
    var ccode = 0;
    var pcode = 0;
    var key = 0;

    for(var i=0; i<strCompressedString.length; i++) {
        intLeftOver += 16;
        intOutputCode <<= 16;
        intOutputCode |= strCompressedString.charCodeAt(i);

        while(1) {
            if(intLeftOver >= 12) {
                ccode = intOutputCode >> (intLeftOver - 12);
                if( typeof( key = ht[ccode] ) != "undefined" ) {
                     strNormalString += key;
                    if(used > 128) {
                        ht[ht.length] = ht[pcode] + key.substr(0, 1);
                    }
                     pcode = ccode;
                } else {
                    key = ht[pcode] + ht[pcode].substr(0, 1);
                    strNormalString += key;
                    ht[ht.length] = ht[pcode] + key.substr(0, 1);
                    pcode = ht.length - 1;
                }

                used ++;
                intLeftOver -= 12;
                intOutputCode &= (Math.pow(2,intLeftOver) - 1);
            } else {
                break;
            }
        }
    }
    return strNormalString;
}
```

使用
```
Compress(str)  //压缩
Decompress(str)  //解压
```

```
/**数组根据数组对象中的某个属性值进行排序的方法 
     * 使用例子：newArray.sort(sortBy('number',false)) //表示根据number属性降序排列;若第二个参数不传递，默认表示升序排序
     * @param attr 排序的属性 如number属性
     * @param rev true表示升序排列，false降序排序
     * */
    sortBy: function(attr,rev){
        //第二个参数没有传递 默认升序排列
        if(rev ==  undefined){
            rev = 1;
        }else{
            rev = (rev) ? 1 : -1;
        }
        
        return function(a,b){
            a = a[attr];
            b = b[attr];
            if(a < b){
                return rev * -1;
            }
            if(a > b){
                return rev * 1;
            }
            return 0;
        }
    }
```

调用
```
Array.sort(sortBy('number',false))  //会修改原数组
```
对象，是任何一个开发者都无法绕开和逃避的话题，她似乎有些深不可测，但如此伟大和巧妙的存在，一定值得你去摸索、发现、征服。

我们都知道，JavaScript有3大对象，分别是`本地对象`、`内置对象`和`宿主对象`。

在此引用ECMA-262（ECMAScript的制定标准）对于他们的定义：

*   本地对象
    
    *   与宿主无关，独立于宿主环境的ECMAScript实现提供的对象。
    *   简单来说，本地对象就是 ECMA-262 定义的类（引用类型）。
    *   这些引用类型在运行过程中需要通过new来创建所需的实例对象。
    *   包含：`Object`、`Array`、`Date`、`RegExp`、`Function`、`Boolean`、`Number`、`String`等。
*   内置对象
    
    *   与宿主无关，独立于宿主环境的ECMAScript实现提供的对象。
    *   在 ECMAScript 程序开始执行前就存在，本身就是实例化内置对象，开发者无需再去实例化。
    *   内置对象是本地对象的子集。
    *   包含：`Global`和`Math`。
    *   ECMAScript5中增添了`JSON`这个存在于全局的内置对象。
*   宿主对象
    
    *   由 ECMAScript 实现的宿主环境提供的对象，包含两大类，一个是宿主提供，一个是自定义类对象。
    *   所有非本地对象都属于宿主对象。
    *   对于嵌入到网页中的JS来说，其宿主对象就是浏览器提供的对象，浏览器对象有很多，如`Window`和`Document`等。
    *   所有的`DOM`和`BOM`对象都属于宿主对象。

> 关于专业名词：本地对象也经常被叫做原生对象或内部对象，包含Global和Math在内的内置对象在《JavaScript高级程序设计》里也被叫做单体内置对象，很多时候，干脆也会直接把本地对象和内置对象统称为“内置对象”，也就是说除了宿主对象，剩下的都是ECMAScript的内部的“内置”对象。
> 
> 声明：本文也将采取这种统称为“内置对象”的方式，比如文章标题。

# Object类型

## 属性

**constructor**  
**prototype**

## 实例方法

**1、toString()**

功能：返回当前对象的字符串形式，返回值为String类型。

示例：

~~~
[1,'2',true].toString(); //"1,2,true"
(new Date()).toString(); //"Sun Sep 24 2017 14:52:20 GMT+0800 (CST)"
({name:'ryan'}).toString(); //"[object Object]"
~~~

> 该方法属于Object对象，由于所有的对象都"继承"了Object的对象实例，因此几乎所有的实例对象都可以使用该方法。
> 
> JavaScript的许多内置对象都重写了该函数，以实现更适合自身的功能需要。

**2、toLocaleString**

功能：返回当前对象的"本地化"字符串形式，以便于当前环境的用户辨识和使用，返回值为String类型。

示例：

~~~
(1234567).toLocaleString(); //"1,234,567"
(6.37588).toLocaleString(); //"6.376"
(new Date()).toLocaleString(); //"2017/9/24 下午2:58:21"
~~~

**3、valueOf()**

功能：返回指定对象的原始值。

> JavaScript的许多内置对象都重写了该函数，以实现更适合自身的功能需要。因此，不同类型对象的valueOf()方法的返回值和返回值类型均可能不同。

## 静态方法

**1、Object.assign(target, ...sources)**

功能：把一个或多个源对象的可枚举、自有属性值复制到目标对象中，返回值为目标对象。  
参数：

*   目标对象（必须）
*   至少一个源对象（可选）

示例：

~~~
var target = {
    a:1
};
var source1 = {
    b:2
};
var source2 = {
    c:function(){
      console.log('c');
    }
};
Object.assign(target,source1,source2);
console.log(target); //{a: 1, b: 2, c: ƒ}
~~~

拓展：自定义实现一个assign方法

~~~
//自定义一个assign方法
  function copy(target){
    if(target == null){
      throwError('出错：Cannot convert undefined or null to object');
    }
    var target = new Object(target);
    for(var i = 1;i < arguments.length;i ++){
      var source = arguments[i];
      for(var key in source){
        if(source.hasOwnProperty(key)){
          //若当前属性为源对象自有属性，则拷贝至目标对象
          target[key] = source[key];
        }
      }
    }
    return target;
  }
~~~

**2、Object.create(proto \[,propertiesObject\])**

功能：创建一个对象，其原型为prototype，同时可添加多个属性。  
参数：

*   proto(必须)：原型对象，可以为null表示没有原型。
*   descriptors(可选)：包含一个或多个属性描述符的对象。

propertiesObject参数详解：

*   数据属性
    
    *   value：值
    *   writable：是否可修改属性的值
    *   configurable：是否可通过delete删除属性，重新定义
    *   enumerable：是否可for-in枚举
*   访问属性
    
    *   get()：访问
    *   set()：设置

示例：

~~~
function Person(name){
    this.name = name;
  }
  Person.prototype.say = function(){console.log('my name is ' + this.name +',my age is ' + this.age);}

  var person = new Person('ryan');
  var p = Object.create(person,{
    age:{
      value: 23,
      writable: true,
      configurable: true
    },
    sex:{
      configurable: true,
      get:function(){return sex + '士';},
      set:function(value){sex = value;}
    }
  });
  
  p.sex = '男';
  p.say(); //'my name is ryan,my age is 23'
  console.log(p.sex); //'男士'
  p.sex = '女';
  console.log(p.sex); //'女士'
~~~

> 总结：Object.create(proto \[,propertiesObject\]) 是E5中提出的一种新的对象创建方式，第一个参数是要继承的原型，如果不是一个子函数，可以传一个null，第二个可选参数是对象的属性描述符。

**3、Object.defineProperty(obj, prop, descriptor)**

功能：在一个对象上定义一个新属性或修改一个现有属性，并返回该对象。

参数：

*   obj（必须）：被操作的目标对象
*   prop（必须）：被定义或修改的目标属性
*   descriptor（必须）：属性的描述符

示例：

~~~
var obj = {};
Object.defineProperty(obj,'name',{
    writable: true,
    configurable: true,
    enumerable: false,
    value: '张三'
});

console.log(obj.name); //'张三'
for(var key in obj){
    console.log(obj[key]); //无结果
}
~~~

> 总结：在参数 descriptor中，如果不指定configurable, writable, enumerable ，则这些属性默认值为false，如果不指定value, get, set，则这些属性默认值为undefined。

**4、Object.defineProperties(obj, props)**

功能：在一个对象上定义一个或多个新属性或修改现有属性，并返回该对象。

参数：

*   obj（必须）：被操作的目标对象
*   props（必须）：该对象的一个或多个键值对定义了将要为对象添加或修改的属性的具体配置

示例：

~~~
var obj = {};
Object.defineProperties(obj,{
    name:{
      writable: true,
      configurable: true,
      enumerable: false,
      value: '张三'
    },
    age:{
      writable: true,
      configurable: true,
      enumerable: true,
      value: 23
    }
});

console.log(obj.name); //'张三'
console.log(obj.age); //23
for(var key in obj){
    console.log(obj[key]); //23
}
~~~

**5、Object.seal(obj) / Object.isSealed(obj)**  
功能：密封对象，阻止其修改现有属性的配置特性，即将对象的所有属性的configurable特性设置为false（也就是全部属性都无法重新配置，唯独可以把writable的值由true改为false，即冻结属性），并阻止添加新属性，返回该对象。

参数：

*   obj（必须）：被密封的对象

示例：

~~~
var obj = {name:'张三'};

Object.seal(obj);
console.log(Object.isSealed(obj)); //true

obj.name = '李四'; //修改值成功
console.log(obj.name); //'李四'
obj.age = 23; //无法添加新属性
console.log(obj.age); //undefined

Object.defineProperty(obj,'name',{ 
    writable: true,
    configurable: true,
    enumerable: true
}); //报错：Cannot redefine property: name
~~~

补充：Object.isSealed(obj)用于判断目标对象是否被密封，返回布尔值。

> 将一个对象密封后仅能保证该对象不被扩展且全部属性不可重配置，但是原属性值却是可以被修改的。

**6、Object.freeze(obj) / Object.isFrozen(obj)**

功能：完全冻结对象，在seal的基础上，属性值也不可以修改，即每个属性的wirtable也被设为false。

参数：

*   obj（必须）：被冻结的对象

示例：

~~~
var obj = {name:'张三'};

Object.freeze(obj);
console.log(Object.isFrozen(obj)); //true

obj.name = '李四'; //修改值失败
console.log(obj.name); //'张三'
obj.age = 23; //无法添加新属性
console.log(obj.age); //undefined

Object.defineProperty(obj,'name',{ 
    writable: true,
    configurable: true,
    enumerable: true
}); //报错：Cannot redefine property: name
~~~

补充：Object.isFrozen(obj)用于判断目标对象是否被冻结，返回布尔值。

**7、getOwnPropertyDescriptor(obj, prop)**

功能：获取目标对象上某自有属性的配置特性（属性描述符），返回值为配置对象。

参数：

*   obj(必须)：目标对象
*   prop(必须)：目标自有属性

示例：

~~~
var obj = {};

Object.defineProperty(obj,'name',{
    writable: true,
    configurable: false,
    enumerable: true,
    value: '张三'
});

var prop = Object.getOwnPropertyDescriptor(obj,'name');
console.log(prop); //{value: "张三", writable: true, enumerable: true, configurable: false}
~~~

**8、Object.getOwnPropertyNames(obj)**

功能：获取目标对象上的全部自有属性名（包括不可枚举属性）组成的数组。

参数：

*   obj(必须)：目标对象

示例：

~~~
var obj = {};
obj.say = function(){};

Object.defineProperties(obj,{
    name:{
      writable: true,
      configurable: true,
      enumerable: true,
      value: '张三'
    },
    age:{
      writable: true,
      configurable: true,
      enumerable: false,
      value: 23
    }
});

var arr = Object.getOwnPropertyNames(obj);
console.log(arr); //["say", "name", "age"]
~~~

**9、Object.getPrototypeOf(obj)**

功能：获取指定对象的原型，即目标对象的prototype属性的值。

参数：

*   obj(必须)：目标对象

示例：

~~~
function Person(name){
    this.name = name;
}

var person = new Person('张三');
var p = Object.create(person); //对象p的原型为person
console.log(p); //Person {}

var __ptoto__ = Object.getPrototypeOf(p);
console.log(__ptoto__); //Person {name: "张三"}
~~~

**10、Object.setPrototypeOf(obj, proto)**

功能：设置目标对象的原型为另一个对象或null，返回该目标对象。

参数：

*   obj(必须)：目标对象
*   proto(必须)：原型对象

示例：

~~~
var obj = {a:1};
var proto = {};
Object.setPrototypeOf(obj,proto); //设置obj对象的原型

proto.b = 2; //为该原型对象添加属性
proto.c = 3;

console.log(obj.a); //1
console.log(obj.b); //2
console.log(obj.c); //3
~~~

解析：上述代码将proto对象设为obj对象的原型，所以从obj对象上可以顺利读取到proto 对象的属性，也就是原型链上的属性。

> Object.setPrototypeOf()方法的作用与\_\_proto\_\_相同，用来设置当前对象的原型指向的对象(prototype)。它是 ES6 正式推荐的设置原型对象的方法。

**11、Object.keys(obj)**

功能：获取目标对象上所有可枚举属性组成的数组。

参数：

*   obj(必须)：目标对象

示例：

~~~
var person = {
    type:'person',
    say:function(){}
  };
  //以person对象为原型，创建obj对象
  var obj = Object.create(person,{
    sex:{
      writable: true,
      configurable: true,
      enumerable: false, //设置sex属性为不可枚举
      value: 'male'
    },
    age:{
      writable: true,
      configurable: true,
      enumerable: true, //设置age属性为可枚举
      value: 23
    }
  });

  obj.name = '张三'; //自定义属性name默认为可枚举
  console.log(obj.propertyIsEnumerable('name')); //true，成功验证name属性为可枚举

  //用for-in可获取obj上全部可枚举的属性（包括自有和原型链上的）
  var arr = [];
  for(var key in obj){
    arr.push(key);
  }
  console.log(arr); //["age", "name", "type", "say"]

  //用Object.keys()可获取obj上全部可枚举的自有属性
  console.log(Object.keys(obj)); // ["age", "name"]
~~~

> 总结：Object.keys(obj)方法获取的集合和for-in遍历获取的不同在于，Object.keys()只获取目标对象上可枚举的自有属性，而for-in遍历会包含原型链上可枚举属性一并获取。
> 
> Object.keys()和Object.getOwnPropertyNames()的相同之处都是获取目标对象的自有属性，区别在于，后者会连同不可枚举的自有属性也一并获取组成数组并返回。

**12、Object.preventExtensions(obj) / Object.isExtensible(obj)**

功能：使某一对象不可扩展，也就是不能为其添加新属性。

参数：

*   obj(必须)：目标对象

补充：Object.isExtensible(obj)方法用于判断一个对象是否可扩展，即是否可以添加新属性。

示例：

~~~
var obj = {
  name: '张三'
};

Object.preventExtensions(obj); //阻止obj的可扩展性
console.log(Object.isExtensible(obj)); //false，表明obj对象为不可扩展，即阻止成功

obj.age = 23; //默认添加失败
console.log(obj.age); //undefined
~~~

# Array类型

## Array 对象属性

**1、length**

设置或返回数组中元素的数目。

> 设置 length 属性可改变数组的大小。如果设置的值比其当前值小，数组将被截断，其尾部的元素将丢失。如果设置的值比它的当前值大，数组将增大，新的元素被添加到数组的尾部，它们的值为 undefined。

**2、constructor**

返回对创建此对象的数组函数的引用。

**3、prototype**

使您有能力向对象添加属性和方法。

## Array 对象方法

**1、concat()**

*   用于连接两个或多个数组，该方法不会改变现有的数组，而是返回被连接数组的一个副本。
*   如果要进行 concat() 操作的参数是数组，那么添加的是数组中的元素，而不是数组。

**2、join()**

*   把数组中的所有元素放入一个字符串，元素是通过指定的分隔符进行分隔的。
*   若省略了分隔符参数，则使用逗号作为分隔符。

**3、push()**

*   向数组的末尾添加一个或多个元素，并返回新的数组长度。

**4、pop()**

*   用于删除数组的最后一个元素，把数组长度减1，并返回被删除元素。
*   如果数组已经为空，则 pop() 不改变数组，并返回 undefined。

**5、shift()**

*   用于把数组的第一个元素从其中删除，并返回被移除的这个元素。
*   如果数组是空的，那么 shift() 方法将不进行任何操作，返回 undefined。
*   该方法是直接修改原数组。

**6、unshift()**

*   向数组的开头添加一个或更多元素，并返回新的数组长度。
*   该方法是直接修改原数组。

**7、reverse()**

*   用于颠倒数组中元素的顺序。
*   该方法会直接修改原数组，而不会创建新数组。

**8、sort()**

*   用于对数组的元素进行排序。
*   该排序直接修改原数组，不生成副本。
*   该方法接受一个可选参数，若未使用参数，将按字母顺序对数组元素进行排序，说得更精确点，是按照字符编码的顺序进行排序。要实现这一点，首先应把数组的元素都转换成字符串（如有必要），以便进行比较。
*   如果想按照其他标准进行排序，就需要提供比较函数，该函数要比较两个值，然后返回一个用于说明这两个值的相对顺序的数字。比较函数应该具有两个参数 a 和 b，其返回值如下：
    
    *   若 a 小于 b，排序后 a 应该在 b 之前，则返回一个小于 0 的值。
    *   若 a 等于 b，则返回 0。
    *   若 a 大于 b，则返回一个大于 0 的值。

**9、slice(start \[,end\])**

*   截取原数组从start到end位置（不包含它）元素组成的子数组。
*   该方法返回一个新数组，不会修改原数组。
*   若未指定end参数，那么截取尾巴直到原数组最后一个元素（包含它）。

**10、splice(index,howmany \[,item1,item2...\])**

*   删除从 index 处开始的hownamy个元素，并且用可选参数列表中声明的一个或多个值来替换那些被删除的元素。
*   该方法返回的是含有被删除的元素组成的数组，若无被删元素，则返回空数组。
*   若参数只有index，那么原数组将从index开始删除直至结尾。
*   该方法直接修改原数组。

map():返回一个新的Array，每个元素为调用func的结果

filter():返回一个符合func条件的元素数组

some():返回一个boolean，判断是否有元素是否符合func条件

every():返回一个boolean，判断每个元素是否符合func条件

forEach():没有返回值，只是针对每个元素调用func

reduce()：reduce方法有两个参数，第一个参数是一个callback，用于针对数组项的操作；第二个参数则是传入的初始值，这个初始值用于单个数组项的操作。需要注意的是，reduce方法返回值并不是数组，而是形如初始值的经过叠加处理后的操作。

# Date类型

Date对象：封装一个时间点，提供操作时间的API。Date对象中封装的是从1970年1月1日0点至今的毫秒数。

**创建Date对象4种方式**

~~~
var now = new Date(); //获取客户端的当前系统时间

var date - new Date("1994/02/04 03:23:55"); //创建自定义时间

var date = new Date(yyyy, MM, dd, hh, mm, ss); //创建自定义时间

var oldDate = new Date("1994/02/04");
var newDate = new Date(oldDate); //复制一个时间对象
~~~

**日期API**

日期分量：FullYear、Month、Date、Day、Hours、Minutes、Seconds、Milliseconds。  
每一个日期分量都有一个`get`和`set`方法（除了Day没有set方法），分别用于获取和设置时间对象。

> 日期的单位及范围:
> 
> 年FullYear (无范围)  
> 月Month (0~11, 0开始,没有12)  
> 日Date (1~31, 和现实生活一样)  
> 星期Day (0~6, 0是星期日,没有7)  
> 时Hours (0~23. 0开始，没有24)  
> 分Minutes (0~59)  
> 秒Seconds (0~59)  
> 毫秒MilliSeconds

# RegExp类型

### RegExp对象属性

**1、global**

*   描述：RegExp 对象是否具有标志 g，即全局匹配。
*   值：true或false。

**2、ignoreCase**

*   描述：RegExp 对象是否具有标志 i，即忽略大小写。
*   值：一个整数，它声明的是上一次匹配文本之后的第一个字符的位置。

**3、lastIndex**

*   描述：lastIndex用于规定下次匹配的起始位置。
*   值：true或false。

> 不具有标志 g 和不表示全局模式的 RegExp 对象不能使用 lastIndex 属性。

### RegExp对象方法

**1、compile()**

*   compile() 方法用于在脚本执行过程中编译正则表达式。
*   compile() 方法也可用于改变和重新编译正则表达式。

**2、exec()**

*   功能：用于检索字符串中的正则表达式的匹配。
*   参数：string，必须，要检索的字符串。
*   返回值：返回一个数组，其中存放匹配的结果。如果未找到匹配，则返回值为 null。

**3、test()**

*   功能：用于检测一个字符串是否匹配某个模式。
*   参数：string，必须，要检索的字符串。
*   返回值：true或者false。

> 注意：支持正则表达式的 String 对象的方法有：search()、match()、replace()和split()。

# Function类型

## Function对象属性

**1、arguments**

*   arguments.length：获取函数实参的个数
*   arguments.callee：获取函数对象本身的引用
*   arguments.callee.length：获取函数形参的个数

> Javascrip中每个函数都会有一个Arguments对象实例arguments，它引用着函数的实参，可以用数组下标的方式"\[\]"引用每个实际传入的参数。

示例：

~~~
function say(a,b,c){
  console.log(arguments.length); //2
  console.log(arguments[0],arguments[1]); //hello world
}
say('hello','world');
~~~

## Function对象方法

**1、toString()**

*   功能：将函数体转换成对应的字符串。

# Boolean类型

常用方法：

**1、toString()**

*   功能：根据布尔值返回字符串 "true" 或 "false"。

> 注释：在 Boolean 对象被用于字符串环境中时，此方法会被自动调用。

**2、valueOf()**

*   功能：返回 Boolean 对象的原始值。

# Number类型

常用方法：

**1、toString()**

功能：将Number数值转换为字符串，该方法接受一个可选参数基数，若省略该参数，则默认基数为10，即十进制。

~~~
var num = 10;
console.log(num.toString(2)); //1010
~~~

**2、toLocaleString()**  
功能：把一个 Number 对象转换为本地格式的字符串。

**3、valueOf()**  
功能：返回一个 Number 对象的基本数字值。

> valueOf() 方法通常由 JavaScript 在后台自动进行调用，而不是显式地处于代码中。

# String类型

## String对象属性

**1、length**

功能：String 对象的 length 属性声明了该字符串中的字符数。

## String对象方法

**1、charAt()**

*   功能：返回指定位置的字符。
*   参数：必须，为目标字符的下标位置。

> 若参数 index 不在 0 与 string.length 之间，该方法将返回一个空字符串。

**2、charCodeAt()**

*   功能：返回在指定的位置的字符的 Unicode 编码。
*   参数：必须，为目标字符的下标位置。

> 若参数 index 不在 0 与 string.length 之间，该方法将返回NaN。

**3、indexOf()**

*   功能：检索字符串，返回指定子字符串在字符串中首次出现的位置。
*   参数1：检索目标子字符串，必须。
*   参数2：在字符串中开始检索的位置，可选。其合法取值是 0 到 stringObject.length - 1。如省略该参数，则将从字符串的首字符开始检索。

> 注意：indexOf() 方法对大小写敏感！  
> 注意：如果要检索的字符串值没有出现，则该方法返回 -1。

**4、lastIndexOf()**

*   功能：从后向前搜索字符串，返回指定子字符串在字符串中首次出现的位置。
*   参数1：检索目标子字符串，必须。
*   参数2：在字符串中开始检索的位置，可选。其合法取值是 0 到 stringObject.length - 1。如省略该参数，则将从字符串的最后一个字符开始检索。

**5、match()**

*   功能：返回指定位置的字符。
*   参数：必须，规定要检索的字符串值或待匹配的 RegExp 对象。
*   返回值：存放匹配结果的数组。该数组的内容依赖于 regexp 是否具有全局标志 g。

> 如果 regexp 没有标志 g，那么 match() 方法就只能在 stringObject 中执行一次匹配。如果没有找到任何匹配的文本， match() 将返回 null。否则，它将返回一个数组，其中存放了与它找到的匹配文本有关的信息。该数组的第 0 个元素存放的是匹配文本，而其余的元素存放的是与正则表达式的子表达式匹配的文本。除了这些常规的数组元素之外，返回的数组还含有两个对象属性。index 属性声明的是匹配文本的起始字符在 stringObject 中的位置，input 属性声明的是对 stringObject 的引用。
> 
> 如果 regexp 具有标志 g，则 match() 方法将执行全局检索，找到 stringObject 中的所有匹配子字符串。若没有找到任何匹配的子串，则返回 null。如果找到了一个或多个匹配子串，则返回一个数组。不过全局匹配返回的数组的内容与前者大不相同，它的数组元素中存放的是 stringObject 中所有的匹配子串，而且也没有 index 属性或 input 属性。

示例：

~~~
var s = 'hello21 world21';
console.log(s.match(/\d{2}/)); //[ '21', index: 5, input: 'hello21 world21' ]

var s = 'hello21 world21';
console.log(s.match(/\d{2}/g)); //[ '21', '21' ]
~~~

**6、replace()**

*   功能：在字符串中用一些字符替换另一些字符，或替换一个与正则表达式匹配的子串。
*   参数1：regexp/substr，必须，规定子字符串或要匹配的 RegExp 对象。
*   参数2：replacement，必须，用于替换的字符串值。
*   返回值：替换后的一个新字符串。

示例：

~~~
var s = 'hello world hello';
console.log(s.replace('hello','hi')); //hi world hello
console.log(s.replace(/hello/,'hi')); //hi world hello
console.log(s.replace(/hello/g,'hi')); //hi world hi
~~~

> replace方法返回一个新字符串，并不会修改原字符串。

**7、search()**

*   功能：用于检索字符串中指定的子字符串，或检索与正则表达式相匹配的子字符串。
*   参数：regexp/substr，必须，规定子字符串或要匹配的 RegExp 对象。
*   返回值：原字符串中第一次匹配到目标字符串的起始位置。

示例：

~~~
var s = 'hello world hello';
console.log(s.search('hello')); //0
console.log(s.search(/hello/g)); //0
console.log(s.search(/hello2/)); //-1
~~~

> search()方法不执行全局匹配，它将忽略标志 g。也就是说，它只匹配一次。若没匹配到结果，则返回-1。

**8、toLowerCase() & toUpperCase()**

*   功能：把字符串转换为小写/大写。
*   返回值：一个新的字符串。

示例：

~~~
var s = 'Hello World';
console.log(s.toLowerCase()); //hello world
console.log(s.toUpperCase()); //HELLO WORLD

~~~

**9、concat()**

*   功能：用于连接两个或多个字符串。
*   语法：stringObject.concat(stringX,stringX,...,stringX)
*   参数：
*   返回值：衔接后的一个新字符串。

> concat方法不会修改原字符串。  
> stringObject.concat() 与 Array.concat() 很相似。  
> 通常使用 " + " 运算符来进行字符串的连接运算通常会更简便一些。

示例：

~~~
var s1 = 'hello ';
var s2 = 'world ';
var s3 = '233';
console.log(s1.concat(s2,s3)); //hello world 233
~~~

**10、split()**

*   功能：用于把一个字符串分割成字符串数组，是 Array.join( ) 的逆操作。
*   参数1：separator，必须，字符串或正则表达式，从该参数指定的地方分割原字符串。
*   参数2：howmany，可选，指定返回数组的最大长度。
*   返回值：一个字符串数组。

示例：

~~~
var s = 'hi baby';
console.log(s.split('')); //[ 'h', 'i', ' ', 'b', 'a', 'b', 'y' ]
console.log(s.split(' '));  //[ 'hi', 'baby' ]
console.log(s.split('b')); //[ 'hi ', 'a', 'y' ]
~~~

**11、slice()**

*   功能：截取字符串的某个部分，并以新的字符串返回被提取的部分。
*   参数1：截取的起始位置，必须。
*   参数2：截取的结束位置，可选。
*   返回值：截取部分，一个新的字符串。

> 注意：String.slice() 与 Array.slice() 相似。  
> slice方法的两个参数接受负值，若为负数，则该参数规定的是从字符串的尾部开始算起的位置。也就是说，-1 指字符串的最后一个字符，-2 指倒数第二个字符，以此类推。  
> 若未指定第二个参数，则默认截取至字符串的末尾。  
> slice方法不修改原字符串。

示例：

~~~
var s = 'hi baby';
console.log(s.slice(3)); //baby
console.log(s.slice(1,5)); //i ba
console.log(s.slice(-4)); //baby
console.log(s.slice(-4,-2)); //ba
~~~

**12、substr()**

*   功能：截取从指定下标开始的指定数目的字符。
*   参数1：start，必须，截取的起始位置，接受负值。
*   参数2：length，可选，截取字符串的长度，若未指定，则默认截取到原字符串的末尾。
*   返回值：截取部分，一个新的字符串。

> 注意：ECMAscript 没有对该方法进行标准化，因此不建议使用它。

示例：

~~~
var s = 'hi baby';
console.log(s.substr(3)); //baby
console.log(s.substr(3,2)); //ba
console.log(s.substr(-3,2)); //ab
~~~

**13、substring()**

*   功能：截取字符串中介于两个指定下标之间的字符。
*   参数1：start，必须，截取的起始位置。
*   参数2：end，可选，截取的结束位置，若未指定，则默认截取到原字符串的末尾。
*   返回值：截取部分，一个新的字符串。

示例：

~~~
var s = 'hi baby';
console.log(s.substring(3)); //baby
console.log(s.substring(3,5)); //ba
console.log(s.substring(5,3)); //ba
console.log(s.substring(3,3)); //''
~~~

> 注意：与 slice() 和 substr() 方法不同的是，substring() 不接受负的参数。  
> 如果参数 start 与 stop 相等，那么该方法返回的一个空串。  
> 如果 start 比 stop 大，那么该方法在提取子串之前会先交换这两个参数。

# Global对象（全局对象）

> 关于全局对象：全局对象只是一个对象，而不是类。既没有构造函数，也无法实例化一个新的全局对象。

## 属性

**Infinity**  
代表正的无穷大的数值。

示例：

~~~
console.log(6/0); //Infinity
console.log(-6/0); //-Infinity
console.log(0/0); //NaN
console.log(1.7976931348623157E+10308); //Infinity
console.log(-1.7976931348623157E+10308); //-Infinity
~~~

> Infinity代表了超出JavaScript处理范围的数值。也就是说JS无法处理的数值都是Infinity。实践证明，JS所能处理的最大值是1.7976931348623157e+308，而最小值是5e-324。

**NaN**  
代表非数字的值。

示例：

~~~
var a = Number('100');
var b = Number('hello world');

console.log(a); //100
console.log(b); //NaN
console.log(isNaN(a)); //false
console.log(isNaN(b)); //true
~~~

> 提示：请使用 isNaN() 方法来判断一个值是否是数字，原因是 NaN 与所有值都不相等，包括它自己。

**Undefined**  
代表未定义的值。

示例：

~~~
var a;
var b = '';
var c = null;

console.log(a === undefined); //true
console.log(b === undefined); //false
console.log(c == undefined); //true
~~~

> 提示：判断一个变量是否未定义，只能用 === undefined 运算来测试，因为 == 运算符会认为 undefined 值等价于 null，即undefined == null会返回true。
> 
> 注释：null 表示无值，而 undefined 表示一个未声明的变量，或已声明但没有赋值的变量，或一个并不存在的对象属性。

## 方法

**1、encodeURI(URIString)**

功能：将字符串作为URI进行编码，返回值为URIstring 的副本。

参数：

*   URIString(必须)：一个待编码的字符串。

示例：

~~~
console.log(encodeURI('http://www.baidu.com')); //http://www.baidu.com
console.log(encodeURI('http://www.baidu.com/my mind')); //http://www.baidu.com/my%20mind
console.log(encodeURI(',/?:@&=+$#')); //,/?:@&=+$#
~~~

> 该方法不会对 ASCII 字母和数字进行编码，也不会对这些 ASCII 标点符号进行编码： - \_ . ! ~ \* ' ( ) 。
> 
> 该方法的目的是对 URI 进行完整的编码，因此对以下在 URI 中具有特殊含义的 ASCII 标点符号，encodeURI() 函数是不会进行转义的：;/?:@&=+$,#
> 
> 提示：如果 URI 组件中含有分隔符，比如 ? 和 #，则应当使用 encodeURIComponent() 方法分别对各组件进行编码。

**2、encodeURIComponent(URIString)**

功能：将字符串作为URI组件进行编码，返回值为URIstring的副本。

该方法不会对 ASCII 字母和数字进行编码，也不会对这些 ASCII 标点符号进行编码： - \_ . ! ~ \* ' ( ) 。

其他字符（比如 ：;/?:@&=+$,# 这些用于分隔 URI 组件的标点符号），都是由一个或多个十六进制的转义序列替换的。

参数：

*   URIString(必须)：一个待编码的字符串。

示例：

> encodeURI和encodeURIComponent的区别：
> 
> 它们都是编码URL，唯一区别就是编码的字符范围，其中encodeURI方法不会对下列字符编码 ASCII字母、数字、~!@#$&\*()=:/,;?+'  
> encodeURIComponent方法不会对下列字符编码 ASCII字母、数字、~!\*()'  
> 所以encodeURIComponent比encodeURI编码的范围更大。  
> 实际例子来说，encodeURIComponent会把http://编码成 http%3A%2F%2F 而encodeURI却不会。

使用场景：

*   当你需要编码整个URL，然后使用这个URL，则使用encodeURI。

~~~
console.log(encodeURI('http://www.baidu.com/home/some other thing'));
//编码后为：http://www.baidu.com/home/some%20other%20thing; 其中，空格被编码成了%20

//但是如果你用了encodeURIComponent
console.log(encodeURIComponent('http://www.baidu.com/home/some other thing'));
//http%3A%2F%2Fwww.baidu.com%2Fhome%2Fsome%20other%20thing 连 "/" 都被编码了，整个URL已经没法用了
~~~

*   当你需要编码URL中的参数时，那么使用encodeURIComponent。

~~~
var param = "http://www.baidu.com/home/"; //param为参数
param = encodeURIComponent(param);
var url = "http://www.baidu.com?next=" + param;
console.log(url) //'http://www.baidu.com?next=http%3A%2F%2Fwww.baidu.com%2Fhome%2F'
//显然，参数中的 "/" 被编码了，而如果用encodeURI肯定要出问题，因为后面的/是需要编码的。
~~~

补充：相应的，存在decodeURI()和decodeURIComponent是用来解码的，逆向操作。

**3、parseInt(string,radix)**

功能：解析一个字符串，并返回一个整数。

参数：

*   string(必须)：待解析的字符串
*   radix(可选)：表示要解析的数字的基数。该值介于 2 ~ 36 之间。  
    如果省略该参数或其值为 0，则数字将以 10 为基础来解析。如果它以 “0x” 或 “0X” 开头，将以 16 为基数。如果该参数小于 2 或者大于 36，则 parseInt() 将返回 NaN。

示例：

~~~
console.log(parseInt('10')); //10
console.log(parseInt('11',9)); //10 (9+1)
console.log(parseInt('11',2)); //3 (2+1)
console.log(parseInt('17',8)); //15 (8+7)
console.log(parseInt('1f',16)); //31 (16+15)
console.log(parseInt('010')); //10
console.log(parseInt('0x0011')); //17
~~~

**4、parseFloat()**

功能：解析一个字符串，并返回一个浮点数。  
该函数指定字符串中的首个字符是否是数字。如果是，则对字符串进行解析，直到到达数字的末端为止。

参数：

*   string(必须)：待解析的字符串

示例：

~~~
console.log(parseFloat('10')); //10
console.log(parseFloat('10.00')); //10 
console.log(parseFloat('10.33')); //10.33
console.log(parseFloat(' 60 ')); //60 首尾的空格会忽略
console.log(parseFloat('23 34 45')); //23 中间的空格不会忽略，会中断
console.log(parseFloat('23 years')); //23
console.log(parseFloat('i am 23')); //NaN
~~~

> 提示：开头和结尾的空格是允许的。如果字符串的第一个字符不能被转换为数字，那么 parseFloat() 会返回 NaN。如果只想解析数字的整数部分，请使用 parseInt() 方法。

**5、isFinite(number)**

功能：用于检查其参数是否是无穷大。

参数：

*   number(必须)：待检测数字。  
    如果 number 是有限数字（或可转换为有限数字），那么返回 true。否则，如果 number 是 NaN（非数字），或者是正、负无穷大的数，则返回 false。

示例：

~~~
console.log(isFinite(123)); //true
console.log(isFinite(-1.23)); //true
console.log(isFinite(5-2)); //true
console.log(isFinite(0)); //true
console.log(isFinite(0/0)); //false
console.log(isFinite('Hello')); //false
~~~

**6、isNaN(number)**

功能：用于检查其参数是否为非数字值。

参数：

*   number(必须)：待检测数字。  
    如果 number 是非数字值 NaN（或者能被转换成NaN），返回 true，否则返回 false。

示例：

~~~
console.log(isNaN(123)); //false
console.log(isNaN(-1.23)); //false
console.log(isNaN(5-2)); //false
console.log(isNaN(0)); //false
console.log(isNaN(0/0)); //true
console.log(isNaN('Hello')); //true
~~~

> 提示：isNaN() 函数通常用于检测 parseFloat() 和 parseInt() 的结果，以判断它们表示的是否是合法的数字。当然也可以用 isNaN() 函数来检测算数错误，比如用 0 作除数的情况。

**7、Number(object)**

功能：把对象的值转换为数字。

参数：

*   object(必须)：待转换的对象。  
    如果参数是 Date 对象，Number() 返回从1970年1月1日至今的毫秒数，即时间戳。如果对象的值无法转换为数字，那么 Number() 函数返回 NaN。

示例：

~~~
console.log(Number(new Boolean(true))); //1
console.log(Number(new Boolean(false))); //0
console.log(Number(new Date())); //1506266494726
console.log(Number(new String('999'))); //999
console.log(Number(new String('999 888'))); //NaN
~~~

**8、String(object)**

功能：把对象的值转换为字符串。

参数：

*   object(必须)：待转换的对象。

示例：

~~~
console.log(String(new Boolean(true))); //'true'
console.log(String(new Boolean(false))); //'false'
console.log(String(new Date())); //'Sun Sep 24 2017 23:25:43 GMT+0800 (CST)'
console.log(String(new String('999'))); //'999'
console.log(String(new String('999 888'))); //'999 888'
console.log(String(12345)); //'12345'
~~~

# Math对象

常用方法：

~~~
Math.abs(); //取绝对值
Math.ceil(); //向上取整
Math.floor(); //向下取整
Math.round(); //四舍五入取整
Math.random(); //生成0~1间的随机数(>0)
Math.max(x,y); //取x、y中较大的那个
Math.min(x,y); //取x、y中较小的那个
~~~

# JSON对象

我们常说的对象字面量其实不是JSON对象，但是有真正的JSON对象。

两者完全不一样概念，在新版的浏览器里JSON对象已经被原生的内置对象了，目前有2个静态方法：JSON.parse用来将JSON字符串反序列化成对象，JSON.stringify用来将对象序列化成JSON字符串。

老版本的浏览器不支持这个对象，但你可以通过json2.js来实现同样的功能。

## JSON对象方法

**1、JSON.parse()**

*   功能：将字符串反序列化成对象
*   参数：JSON字符串
*   返回值：对象

示例：

~~~
var jsonString = '{"name":"ryan"}'; //JSON字符串（比如从AJAX获取字符串信息）
var obj = JSON.parse(jsonString); //将字符串反序列化成对象
console.log(obj); //{ name: 'ryan' }
console.log(obj.name == 'ryan'); //true
~~~

**2、JSON.stringify()**

*   功能：将一个对象解析为JSON字符串
*   参数：对象
*   返回值：JSON字符串

示例：

~~~
var obj = {name:'ryan',age:23};
var jsonString = JSON.stringify(obj);
console.log(jsonString); //'{"name":"ryan","age":23}'
~~~
